<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Intro to Data Science for the Social Sector</title>
  <meta name="description" content="This is an introductory text to data science designed for social science graduate students in public affairs, nonprofit management, and international development.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Intro to Data Science for the Social Sector" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an introductory text to data science designed for social science graduate students in public affairs, nonprofit management, and international development." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Intro to Data Science for the Social Sector" />
  
  <meta name="twitter:description" content="This is an introductory text to data science designed for social science graduate students in public affairs, nonprofit management, and international development." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="the-plot-function.html">
<link rel="next" href="custom-plot-example.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/detect-resize-0.5.3/jquery.resize.js"></script>
<link href="libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet" />
<script src="libs/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<script src="libs/d3-3.5.2/d3.min.js"></script>
<script src="libs/vega-1.4.3/vega.min.js"></script>
<script src="libs/lodash-2.2.1/lodash.min.js"></script>
<script>var lodash = _.noConflict();</script>
<link href="libs/ggvis-0.4.3/css/ggvis.css" rel="stylesheet" />
<script src="libs/ggvis-0.4.3/js/ggvis.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://ds4ps.github.io/course_website/">Data Science I</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I PART I: FOUNDATIONS</b></span></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#navigation"><i class="fa fa-check"></i><b>1.1</b> Navigation</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#setting-your-working-directory"><i class="fa fa-check"></i><b>1.1.1</b> Setting Your Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#commenting-code"><i class="fa fa-check"></i><b>1.2</b> Commenting Code</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#help"><i class="fa fa-check"></i><b>1.3</b> Help</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#install-programs-packages"><i class="fa fa-check"></i><b>1.4</b> Install Programs (packages)</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#accessing-built-in-datasets-in-r"><i class="fa fa-check"></i><b>1.5</b> Accessing Built-In Datasets in R</a><ul>
<li class="chapter" data-level="1.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-data-operations"><i class="fa fa-check"></i><b>1.5.1</b> Basic Data Operations</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#using-the-lahman-data"><i class="fa fa-check"></i><b>1.5.2</b> Using the Lahman Data</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#example-analysis"><i class="fa fa-check"></i><b>1.5.3</b> Example Analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>2</b> Functions</a><ul>
<li class="chapter" data-level="2.1" data-path="functions.html"><a href="functions.html#key-concepts"><i class="fa fa-check"></i><b>2.1</b> Key Concepts</a></li>
<li class="chapter" data-level="2.2" data-path="functions.html"><a href="functions.html#computer-programs-as-recipes"><i class="fa fa-check"></i><b>2.2</b> Computer Programs as Recipes</a></li>
<li class="chapter" data-level="2.3" data-path="functions.html"><a href="functions.html#example-function"><i class="fa fa-check"></i><b>2.3</b> Example Function</a></li>
<li class="chapter" data-level="2.4" data-path="functions.html"><a href="functions.html#default-argument-values"><i class="fa fa-check"></i><b>2.4</b> Default Argument Values</a></li>
<li class="chapter" data-level="2.5" data-path="functions.html"><a href="functions.html#assignment"><i class="fa fa-check"></i><b>2.5</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i>VECTORS</a></li>
<li class="chapter" data-level="3" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>3</b> Data Types</a><ul>
<li class="chapter" data-level="3.1" data-path="data-types.html"><a href="data-types.html#key-concepts-1"><i class="fa fa-check"></i><b>3.1</b> Key Concepts</a></li>
<li class="chapter" data-level="3.2" data-path="data-types.html"><a href="data-types.html#vectors-1"><i class="fa fa-check"></i><b>3.2</b> Vectors</a></li>
<li class="chapter" data-level="3.3" data-path="data-types.html"><a href="data-types.html#common-vectors-functions"><i class="fa fa-check"></i><b>3.3</b> Common Vectors Functions</a></li>
<li class="chapter" data-level="3.4" data-path="data-types.html"><a href="data-types.html#the-combine-function"><i class="fa fa-check"></i><b>3.4</b> The Combine Function</a></li>
<li class="chapter" data-level="3.5" data-path="data-types.html"><a href="data-types.html#casting"><i class="fa fa-check"></i><b>3.5</b> Casting</a></li>
<li class="chapter" data-level="3.6" data-path="data-types.html"><a href="data-types.html#numeric-vectors"><i class="fa fa-check"></i><b>3.6</b> Numeric Vectors</a><ul>
<li class="chapter" data-level="3.6.1" data-path="data-types.html"><a href="data-types.html#integers-are-simple-numeric-vectors"><i class="fa fa-check"></i><b>3.6.1</b> Integers Are Simple Numeric Vectors</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-types.html"><a href="data-types.html#character-vectors"><i class="fa fa-check"></i><b>3.7</b> Character Vectors</a><ul>
<li class="chapter" data-level="3.7.1" data-path="data-types.html"><a href="data-types.html#quotes-in-arguments"><i class="fa fa-check"></i><b>3.7.1</b> Quotes in Arguments</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-types.html"><a href="data-types.html#factors"><i class="fa fa-check"></i><b>3.8</b> Factors</a></li>
<li class="chapter" data-level="3.9" data-path="data-types.html"><a href="data-types.html#logical-vectors"><i class="fa fa-check"></i><b>3.9</b> Logical Vectors</a></li>
<li class="chapter" data-level="3.10" data-path="data-types.html"><a href="data-types.html#generating-vectors"><i class="fa fa-check"></i><b>3.10</b> Generating Vectors</a></li>
<li class="chapter" data-level="3.11" data-path="data-types.html"><a href="data-types.html#variable-transformations"><i class="fa fa-check"></i><b>3.11</b> Variable Transformations</a></li>
<li class="chapter" data-level="3.12" data-path="data-types.html"><a href="data-types.html#missing-values-nas"><i class="fa fa-check"></i><b>3.12</b> Missing Values: NA’s</a></li>
<li class="chapter" data-level="3.13" data-path="data-types.html"><a href="data-types.html#datasets"><i class="fa fa-check"></i><b>3.13</b> Datasets</a><ul>
<li class="chapter" data-level="3.13.1" data-path="data-types.html"><a href="data-types.html#data-frames"><i class="fa fa-check"></i><b>3.13.1</b> Data Frames</a></li>
<li class="chapter" data-level="3.13.2" data-path="data-types.html"><a href="data-types.html#matrices"><i class="fa fa-check"></i><b>3.13.2</b> Matrices</a></li>
<li class="chapter" data-level="3.13.3" data-path="data-types.html"><a href="data-types.html#lists"><i class="fa fa-check"></i><b>3.13.3</b> Lists</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="logical-statements.html"><a href="logical-statements.html"><i class="fa fa-check"></i><b>4</b> Logical Statements</a><ul>
<li class="chapter" data-level="4.1" data-path="logical-statements.html"><a href="logical-statements.html#key-concepts-2"><i class="fa fa-check"></i><b>4.1</b> Key Concepts</a></li>
<li class="chapter" data-level="4.2" data-path="logical-statements.html"><a href="logical-statements.html#operators"><i class="fa fa-check"></i><b>4.2</b> Operators</a></li>
<li class="chapter" data-level="4.3" data-path="logical-statements.html"><a href="logical-statements.html#selector-vectors"><i class="fa fa-check"></i><b>4.3</b> Selector Vectors</a></li>
<li class="chapter" data-level="4.4" data-path="logical-statements.html"><a href="logical-statements.html#usefulness-of-selector-vectors"><i class="fa fa-check"></i><b>4.4</b> Usefulness of Selector Vectors</a></li>
<li class="chapter" data-level="4.5" data-path="logical-statements.html"><a href="logical-statements.html#compound-logical-statements"><i class="fa fa-check"></i><b>4.5</b> Compound Logical Statements</a></li>
<li class="chapter" data-level="4.6" data-path="logical-statements.html"><a href="logical-statements.html#nas-in-logical-statements"><i class="fa fa-check"></i><b>4.6</b> NAs in Logical Statements</a></li>
<li class="chapter" data-level="4.7" data-path="logical-statements.html"><a href="logical-statements.html#subsets"><i class="fa fa-check"></i><b>4.7</b> Subsets</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-verbs.html"><a href="data-verbs.html"><i class="fa fa-check"></i>DATA VERBS</a></li>
<li class="chapter" data-level="5" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html"><i class="fa fa-check"></i><b>5</b> The <strong>dplyr</strong> Package</a><ul>
<li class="chapter" data-level="5.1" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html#packages-used-in-this-chapter"><i class="fa fa-check"></i><b>5.1</b> Packages Used in This Chapter</a></li>
<li class="chapter" data-level="5.2" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html#key-concepts-3"><i class="fa fa-check"></i><b>5.2</b> Key Concepts</a></li>
<li class="chapter" data-level="5.3" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html#the-dplyr-package-1"><i class="fa fa-check"></i><b>5.3</b> The <strong>dplyr</strong> Package</a></li>
<li class="chapter" data-level="5.4" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html#use-filter-to-subset-rows"><i class="fa fa-check"></i><b>5.4</b> Use <strong>filter()</strong> to Subset Rows</a></li>
<li class="chapter" data-level="5.5" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html#select-columns"><i class="fa fa-check"></i><b>5.5</b> <strong>select()</strong> Columns</a></li>
<li class="chapter" data-level="5.6" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html#arrange-sorts-data"><i class="fa fa-check"></i><b>5.6</b> <strong>arrange()</strong> Sorts Data</a></li>
<li class="chapter" data-level="5.7" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html#variable-transforms-with-mutate"><i class="fa fa-check"></i><b>5.7</b> Variable Transforms with <strong>mutate()</strong></a></li>
<li class="chapter" data-level="5.8" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html#rename-variables"><i class="fa fa-check"></i><b>5.8</b> <strong>rename()</strong> Variables</a></li>
<li class="chapter" data-level="5.9" data-path="the-dplyr-package.html"><a href="the-dplyr-package.html#summarize-variables"><i class="fa fa-check"></i><b>5.9</b> <strong>summarize()</strong> Variables</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html"><i class="fa fa-check"></i><b>6</b> Descriptive Statistics</a><ul>
<li class="chapter" data-level="6.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#useful-packages"><i class="fa fa-check"></i><b>6.1</b> Useful Packages</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-recipes.html"><a href="data-recipes.html"><i class="fa fa-check"></i><b>7</b> Data Recipes</a><ul>
<li class="chapter" data-level="7.1" data-path="data-recipes.html"><a href="data-recipes.html#packages-used-in-this-chapter-1"><i class="fa fa-check"></i><b>7.1</b> Packages Used in This Chapter</a></li>
<li class="chapter" data-level="7.2" data-path="data-recipes.html"><a href="data-recipes.html#key-concepts-4"><i class="fa fa-check"></i><b>7.2</b> Key Concepts</a></li>
<li class="chapter" data-level="7.3" data-path="data-recipes.html"><a href="data-recipes.html#the-pipe-operator"><i class="fa fa-check"></i><b>7.3</b> The Pipe Operator <strong>%&gt;%</strong></a></li>
<li class="chapter" data-level="7.4" data-path="data-recipes.html"><a href="data-recipes.html#building-data-recipes"><i class="fa fa-check"></i><b>7.4</b> Building Data Recipes</a></li>
<li class="chapter" data-level="7.5" data-path="data-recipes.html"><a href="data-recipes.html#conclusion"><i class="fa fa-check"></i><b>7.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html"><i class="fa fa-check"></i><b>8</b> Analysis with Groups</a><ul>
<li class="chapter" data-level="8.1" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#packages-used-in-this-chapter-2"><i class="fa fa-check"></i><b>8.1</b> Packages Used in this Chapter</a></li>
<li class="chapter" data-level="8.2" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#hypothetical-experimental-data"><i class="fa fa-check"></i><b>8.2</b> Hypothetical Experimental Data</a></li>
<li class="chapter" data-level="8.3" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#group-structure"><i class="fa fa-check"></i><b>8.3</b> Group Structure</a><ul>
<li class="chapter" data-level="8.3.1" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#what-are-groups"><i class="fa fa-check"></i><b>8.3.1</b> What Are Groups?</a></li>
<li class="chapter" data-level="8.3.2" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#main-take-away"><i class="fa fa-check"></i><b>8.3.2</b> Main Take-Away</a></li>
<li class="chapter" data-level="8.3.3" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#example"><i class="fa fa-check"></i><b>8.3.3</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#analysis-by-group"><i class="fa fa-check"></i><b>8.4</b> Analysis by Group</a><ul>
<li class="chapter" data-level="8.4.1" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#highest-ave-player-salary"><i class="fa fa-check"></i><b>8.4.1</b> Highest Ave Player Salary</a></li>
<li class="chapter" data-level="8.4.2" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#most-players-paid-over-5-million"><i class="fa fa-check"></i><b>8.4.2</b> Most Players Paid Over $5 Million</a></li>
<li class="chapter" data-level="8.4.3" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#fielding-positions"><i class="fa fa-check"></i><b>8.4.3</b> Fielding Positions</a></li>
<li class="chapter" data-level="8.4.4" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#country-of-birth"><i class="fa fa-check"></i><b>8.4.4</b> Country of Birth</a></li>
<li class="chapter" data-level="8.4.5" data-path="analysis-with-groups.html"><a href="analysis-with-groups.html#pay-raises"><i class="fa fa-check"></i><b>8.4.5</b> Pay Raises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-viz.html"><a href="data-viz.html"><i class="fa fa-check"></i>DATA VIZ</a></li>
<li class="chapter" data-level="9" data-path="the-plot-function.html"><a href="the-plot-function.html"><i class="fa fa-check"></i><b>9</b> The plot() Function</a><ul>
<li class="chapter" data-level="9.1" data-path="the-plot-function.html"><a href="the-plot-function.html#key-concepts-5"><i class="fa fa-check"></i><b>9.1</b> Key Concepts</a></li>
<li class="chapter" data-level="9.2" data-path="the-plot-function.html"><a href="the-plot-function.html#plot-arguments"><i class="fa fa-check"></i><b>9.2</b> plot() Arguments</a></li>
<li class="chapter" data-level="9.3" data-path="the-plot-function.html"><a href="the-plot-function.html#titles"><i class="fa fa-check"></i><b>9.3</b> Titles</a></li>
<li class="chapter" data-level="9.4" data-path="the-plot-function.html"><a href="the-plot-function.html#type-of-plot"><i class="fa fa-check"></i><b>9.4</b> Type of Plot</a></li>
<li class="chapter" data-level="9.5" data-path="the-plot-function.html"><a href="the-plot-function.html#shape-of-points"><i class="fa fa-check"></i><b>9.5</b> Shape of Points</a></li>
<li class="chapter" data-level="9.6" data-path="the-plot-function.html"><a href="the-plot-function.html#size-of-points"><i class="fa fa-check"></i><b>9.6</b> Size of Points</a></li>
<li class="chapter" data-level="9.7" data-path="the-plot-function.html"><a href="the-plot-function.html#colors"><i class="fa fa-check"></i><b>9.7</b> Colors</a></li>
<li class="chapter" data-level="9.8" data-path="the-plot-function.html"><a href="the-plot-function.html#looking-ahead"><i class="fa fa-check"></i><b>9.8</b> Looking Ahead</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="customizing-plots.html"><a href="customizing-plots.html"><i class="fa fa-check"></i><b>10</b> Customizing Plots</a><ul>
<li class="chapter" data-level="10.1" data-path="customizing-plots.html"><a href="customizing-plots.html#key-concepts-6"><i class="fa fa-check"></i><b>10.1</b> Key Concepts</a></li>
<li class="chapter" data-level="10.2" data-path="customizing-plots.html"><a href="customizing-plots.html#packages-used-in-this-chapter-3"><i class="fa fa-check"></i><b>10.2</b> Packages Used in This Chapter</a></li>
<li class="chapter" data-level="10.3" data-path="customizing-plots.html"><a href="customizing-plots.html#layering-approach"><i class="fa fa-check"></i><b>10.3</b> Layering Approach</a></li>
<li class="chapter" data-level="10.4" data-path="customizing-plots.html"><a href="customizing-plots.html#highlighting-cases"><i class="fa fa-check"></i><b>10.4</b> Highlighting Cases</a></li>
<li class="chapter" data-level="10.5" data-path="customizing-plots.html"><a href="customizing-plots.html#visual-hypothesis-testing"><i class="fa fa-check"></i><b>10.5</b> Visual Hypothesis Testing</a></li>
<li class="chapter" data-level="10.6" data-path="customizing-plots.html"><a href="customizing-plots.html#additional-parameters"><i class="fa fa-check"></i><b>10.6</b> Additional Parameters</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="custom-plot-example.html"><a href="custom-plot-example.html"><i class="fa fa-check"></i><b>11</b> Custom Plot Example</a><ul>
<li class="chapter" data-level="11.1" data-path="custom-plot-example.html"><a href="custom-plot-example.html#basic-rank-plot"><i class="fa fa-check"></i><b>11.1</b> Basic Rank Plot</a></li>
<li class="chapter" data-level="11.2" data-path="custom-plot-example.html"><a href="custom-plot-example.html#creating-a-submay-map-rank-plot"><i class="fa fa-check"></i><b>11.2</b> Creating a Submay Map Rank Plot</a></li>
<li class="chapter" data-level="11.3" data-path="custom-plot-example.html"><a href="custom-plot-example.html#lines"><i class="fa fa-check"></i><b>11.3</b> Lines</a></li>
<li class="chapter" data-level="11.4" data-path="custom-plot-example.html"><a href="custom-plot-example.html#connected-points"><i class="fa fa-check"></i><b>11.4</b> Connected Points</a></li>
<li class="chapter" data-level="11.5" data-path="custom-plot-example.html"><a href="custom-plot-example.html#separate-points-and-connecting-lines"><i class="fa fa-check"></i><b>11.5</b> Separate Points and Connecting Lines</a></li>
<li class="chapter" data-level="11.6" data-path="custom-plot-example.html"><a href="custom-plot-example.html#add-labels"><i class="fa fa-check"></i><b>11.6</b> Add Labels</a></li>
<li class="chapter" data-level="11.7" data-path="custom-plot-example.html"><a href="custom-plot-example.html#add-axes-and-title"><i class="fa fa-check"></i><b>11.7</b> Add Axes and Title</a></li>
<li class="chapter" data-level="11.8" data-path="custom-plot-example.html"><a href="custom-plot-example.html#generalizing-code"><i class="fa fa-check"></i><b>11.8</b> Generalizing Code</a></li>
<li class="chapter" data-level="11.9" data-path="custom-plot-example.html"><a href="custom-plot-example.html#improved-aesthetics"><i class="fa fa-check"></i><b>11.9</b> Improved Aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i>DATA WRANGLING</a></li>
<li class="chapter" data-level="12" data-path="merging-data.html"><a href="merging-data.html"><i class="fa fa-check"></i><b>12</b> Merging Data</a><ul>
<li class="chapter" data-level="12.1" data-path="merging-data.html"><a href="merging-data.html#packages-used-in-this-chapter-4"><i class="fa fa-check"></i><b>12.1</b> Packages Used in This Chapter</a></li>
<li class="chapter" data-level="12.2" data-path="merging-data.html"><a href="merging-data.html#relational-databases"><i class="fa fa-check"></i><b>12.2</b> Relational Databases</a></li>
<li class="chapter" data-level="12.3" data-path="merging-data.html"><a href="merging-data.html#set-theory"><i class="fa fa-check"></i><b>12.3</b> Set Theory</a><ul>
<li class="chapter" data-level="12.3.1" data-path="merging-data.html"><a href="merging-data.html#set-theory-functions"><i class="fa fa-check"></i><b>12.3.1</b> Set Theory Functions</a></li>
<li class="chapter" data-level="12.3.2" data-path="merging-data.html"><a href="merging-data.html#set-theory-using-logical-operators"><i class="fa fa-check"></i><b>12.3.2</b> Set Theory Using Logical Operators</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="merging-data.html"><a href="merging-data.html#merging-data-1"><i class="fa fa-check"></i><b>12.4</b> Merging Data</a><ul>
<li class="chapter" data-level="12.4.1" data-path="merging-data.html"><a href="merging-data.html#the-by.x-and-by.y-arguments"><i class="fa fa-check"></i><b>12.4.1</b> The by.x and by.y Arguments</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="merging-data.html"><a href="merging-data.html#non-unique-observations-in-id-variables"><i class="fa fa-check"></i><b>12.5</b> Non-Unique Observations in ID Variables</a><ul>
<li class="chapter" data-level="12.5.1" data-path="merging-data.html"><a href="merging-data.html#example-of-incorrect-merge"><i class="fa fa-check"></i><b>12.5.1</b> Example of Incorrect Merge</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="merging-data.html"><a href="merging-data.html#the-in-function"><i class="fa fa-check"></i><b>12.6</b> The %in% function</a></li>
<li class="chapter" data-level="12.7" data-path="merging-data.html"><a href="merging-data.html#the-match-function"><i class="fa fa-check"></i><b>12.7</b> The Match Function</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://webapp4.asu.edu/programs/t5/majorinfo/ASU00/PPPGEMS/graduate/false" target="blank">ASU</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intro to Data Science for the Social Sector</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="customizing-plots" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Customizing Plots</h1>
<div id="key-concepts-6" class="section level2">
<h2><span class="header-section-number">10.1</span> Key Concepts</h2>
<p>We can create almost any customized visualization using a small number of functions from the Core R graphics engine:</p>
<ul>
<li>plot.new(); plot.window()</li>
<li>points()</li>
<li>lines()</li>
<li>text()</li>
<li>segments()</li>
<li>axis()</li>
<li>title()</li>
</ul>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb175-1" data-line-number="1"><span class="kw">points</span>(</a>
<a class="sourceLine" id="cb175-2" data-line-number="2">  <span class="dt">x=</span>x, <span class="dt">y=</span>y,                    <span class="co"># plots points at the x,y positions </span></a>
<a class="sourceLine" id="cb175-3" data-line-number="3">  <span class="dt">pch=</span><span class="dv">19</span>,                      <span class="co"># the type of point to plot</span></a>
<a class="sourceLine" id="cb175-4" data-line-number="4">  <span class="dt">cex=</span><span class="dv">2</span>,                           <span class="co"># aspect ratio of point size</span></a>
<a class="sourceLine" id="cb175-5" data-line-number="5">  <span class="dt">col=</span><span class="st">&quot;red&quot;</span>,                     <span class="co"># color of points</span></a>
<a class="sourceLine" id="cb175-6" data-line-number="6">  <span class="dt">bg=</span><span class="st">&quot;green&quot;</span>                     <span class="co"># fill color for open symbols</span></a>
<a class="sourceLine" id="cb175-7" data-line-number="7"> )</a>
<a class="sourceLine" id="cb175-8" data-line-number="8"></a>
<a class="sourceLine" id="cb175-9" data-line-number="9"></a>
<a class="sourceLine" id="cb175-10" data-line-number="10"><span class="kw">text</span>(</a>
<a class="sourceLine" id="cb175-11" data-line-number="11">  <span class="dt">x=</span>x, <span class="dt">y=</span>y,                    <span class="co"># draws a line by connecting points </span></a>
<a class="sourceLine" id="cb175-12" data-line-number="12">  <span class="dt">labels=</span>some.text,          <span class="co"># vector of labels to plot on the graph</span></a>
<a class="sourceLine" id="cb175-13" data-line-number="13">  <span class="dt">pos=</span><span class="dv">3</span>,                           <span class="co"># position: 1=below, 2=left, 3=above, 4=right</span></a>
<a class="sourceLine" id="cb175-14" data-line-number="14">  <span class="dt">cex=</span><span class="dv">2</span>,                           <span class="co"># aspect ratio of text size</span></a>
<a class="sourceLine" id="cb175-15" data-line-number="15">  <span class="dt">col=</span><span class="st">&quot;red&quot;</span>                    <span class="co"># color of text</span></a>
<a class="sourceLine" id="cb175-16" data-line-number="16"> )</a>
<a class="sourceLine" id="cb175-17" data-line-number="17"></a>
<a class="sourceLine" id="cb175-18" data-line-number="18"></a>
<a class="sourceLine" id="cb175-19" data-line-number="19"><span class="kw">lines</span>(</a>
<a class="sourceLine" id="cb175-20" data-line-number="20">  <span class="dt">x=</span>x, <span class="dt">y=</span>y,                    <span class="co"># draws a line by connecting points </span></a>
<a class="sourceLine" id="cb175-21" data-line-number="21">  <span class="dt">lty=</span><span class="st">&quot;l&quot;</span>,                       <span class="co"># type of lines, same as above</span></a>
<a class="sourceLine" id="cb175-22" data-line-number="22">  <span class="dt">lwd=</span><span class="fl">0.5</span>,                     <span class="co"># line thickness</span></a>
<a class="sourceLine" id="cb175-23" data-line-number="23">)</a>
<a class="sourceLine" id="cb175-24" data-line-number="24"></a>
<a class="sourceLine" id="cb175-25" data-line-number="25"></a>
<a class="sourceLine" id="cb175-26" data-line-number="26"><span class="kw">segments</span>(</a>
<a class="sourceLine" id="cb175-27" data-line-number="27">  <span class="dt">x0=</span>x0, <span class="dt">y0=</span>y0,              <span class="co"># starting points of the segments (usually a vector)</span></a>
<a class="sourceLine" id="cb175-28" data-line-number="28">  <span class="dt">x1=</span>x1, <span class="dt">y1=</span>y1,              <span class="co"># end points of the segments (usually a vector)</span></a>
<a class="sourceLine" id="cb175-29" data-line-number="29">  ...                            <span class="co"># other arguments from lines()</span></a>
<a class="sourceLine" id="cb175-30" data-line-number="30"> )</a>
<a class="sourceLine" id="cb175-31" data-line-number="31"></a>
<a class="sourceLine" id="cb175-32" data-line-number="32"></a>
<a class="sourceLine" id="cb175-33" data-line-number="33"><span class="kw">title</span>(</a>
<a class="sourceLine" id="cb175-34" data-line-number="34">  <span class="dt">main=</span><span class="st">&quot;Plot Title&quot;</span>,       <span class="co"># text for the plot title</span></a>
<a class="sourceLine" id="cb175-35" data-line-number="35">  <span class="dt">xlab=</span><span class="st">&quot;x variable&quot;</span>,       <span class="co"># text for the x-axis label</span></a>
<a class="sourceLine" id="cb175-36" data-line-number="36">  <span class="dt">ylab=</span><span class="st">&quot;y variable&quot;</span>,       <span class="co"># text for the y-axis label</span></a>
<a class="sourceLine" id="cb175-37" data-line-number="37">  <span class="dt">line=</span> <span class="dv">-1</span>                 <span class="co"># move the title closer / further</span></a>
<a class="sourceLine" id="cb175-38" data-line-number="38">)</a>
<a class="sourceLine" id="cb175-39" data-line-number="39"> </a>
<a class="sourceLine" id="cb175-40" data-line-number="40"></a>
<a class="sourceLine" id="cb175-41" data-line-number="41"><span class="kw">axis</span>(</a>
<a class="sourceLine" id="cb175-42" data-line-number="42">  <span class="dt">side=</span><span class="dv">1</span>                   <span class="co"># 1=below, 2=left, 3=above, 4=right</span></a>
<a class="sourceLine" id="cb175-43" data-line-number="43">  <span class="dt">at=</span><span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>),          <span class="co"># position of tick marks</span></a>
<a class="sourceLine" id="cb175-44" data-line-number="44">  <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;S&quot;</span>,<span class="st">&quot;M&quot;</span>,<span class="st">&quot;L&quot;</span>)    <span class="co"># labels for tick marks </span></a>
<a class="sourceLine" id="cb175-45" data-line-number="45">)</a></code></pre></div>
</div>
<div id="packages-used-in-this-chapter-3" class="section level2">
<h2><span class="header-section-number">10.2</span> Packages Used in This Chapter</h2>
<p>We will use some data from the <strong>Lahman</strong> baseball data package for examples in this chapter.</p>
<p>The <strong>Master</strong> data frame contains information about professional baseball players. We will focus on the relationship between height and weight of the players.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" data-line-number="1"><span class="kw">library</span>( Lahman )</a>
<a class="sourceLine" id="cb176-2" data-line-number="2"><span class="kw">data</span>( Master )</a></code></pre></div>
<table style="width:96%;">
<colgroup>
<col width="16%" />
<col width="15%" />
<col width="12%" />
<col width="12%" />
<col width="9%" />
<col width="12%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">nameFirst</th>
<th align="center">nameLast</th>
<th align="center">weight</th>
<th align="center">height</th>
<th align="center">bats</th>
<th align="center">throws</th>
<th align="center">birthYear</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">David</td>
<td align="center">Aardsma</td>
<td align="center">215</td>
<td align="center">75</td>
<td align="center">R</td>
<td align="center">R</td>
<td align="center">1981</td>
</tr>
<tr class="even">
<td align="center">Hank</td>
<td align="center">Aaron</td>
<td align="center">180</td>
<td align="center">72</td>
<td align="center">R</td>
<td align="center">R</td>
<td align="center">1934</td>
</tr>
<tr class="odd">
<td align="center">Tommie</td>
<td align="center">Aaron</td>
<td align="center">190</td>
<td align="center">75</td>
<td align="center">R</td>
<td align="center">R</td>
<td align="center">1939</td>
</tr>
<tr class="even">
<td align="center">Don</td>
<td align="center">Aase</td>
<td align="center">190</td>
<td align="center">75</td>
<td align="center">R</td>
<td align="center">R</td>
<td align="center">1954</td>
</tr>
<tr class="odd">
<td align="center">Andy</td>
<td align="center">Abad</td>
<td align="center">184</td>
<td align="center">73</td>
<td align="center">L</td>
<td align="center">L</td>
<td align="center">1972</td>
</tr>
<tr class="even">
<td align="center">Fernando</td>
<td align="center">Abad</td>
<td align="center">220</td>
<td align="center">73</td>
<td align="center">L</td>
<td align="center">L</td>
<td align="center">1985</td>
</tr>
</tbody>
</table>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-256-1.png" width="70%" style="display: block; margin: auto;" /><img src="DS4PS-I_files/figure-html/unnamed-chunk-256-2.png" width="70%" style="display: block; margin: auto;" /><img src="DS4PS-I_files/figure-html/unnamed-chunk-256-3.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="layering-approach" class="section level2">
<h2><span class="header-section-number">10.3</span> Layering Approach</h2>
<p>Graphs in R are created by layering elements on top of each other. The easiest way to understand this is to build a plot from the ground up.</p>
<p>The following graph is comprised of six components:</p>
<ul>
<li>points</li>
<li>plot box</li>
<li>x-axis</li>
<li>y-axis</li>
<li>x-label</li>
<li>y-label</li>
</ul>
<p>Many other elements can be added to the plot, but this is a good start.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb177-1" data-line-number="1"><span class="co"># remove players with no height or weight measures</span></a>
<a class="sourceLine" id="cb177-2" data-line-number="2">Master &lt;-<span class="st"> </span><span class="kw">select</span>( Master, height, weight )</a>
<a class="sourceLine" id="cb177-3" data-line-number="3">Master &lt;-<span class="st"> </span><span class="kw">na.omit</span>( Master ) </a>
<a class="sourceLine" id="cb177-4" data-line-number="4"></a>
<a class="sourceLine" id="cb177-5" data-line-number="5"><span class="co"># find max and min values for each</span></a>
<a class="sourceLine" id="cb177-6" data-line-number="6">xmin &lt;-<span class="st"> </span><span class="kw">min</span>(Master<span class="op">$</span>height)</a>
<a class="sourceLine" id="cb177-7" data-line-number="7">xmax &lt;-<span class="st"> </span><span class="kw">max</span>(Master<span class="op">$</span>height)</a>
<a class="sourceLine" id="cb177-8" data-line-number="8">ymin &lt;-<span class="st"> </span><span class="kw">min</span>(Master<span class="op">$</span>weight)</a>
<a class="sourceLine" id="cb177-9" data-line-number="9">ymax &lt;-<span class="st"> </span><span class="kw">max</span>(Master<span class="op">$</span>weight)</a>
<a class="sourceLine" id="cb177-10" data-line-number="10"></a>
<a class="sourceLine" id="cb177-11" data-line-number="11"><span class="co"># empty plot</span></a>
<a class="sourceLine" id="cb177-12" data-line-number="12"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb177-13" data-line-number="13"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(xmin,xmax), <span class="dt">ylim=</span><span class="kw">c</span>(ymin,ymax) )</a>
<a class="sourceLine" id="cb177-14" data-line-number="14"><span class="kw">box</span>( <span class="dt">col=</span><span class="st">&quot;gray&quot;</span> )</a>
<a class="sourceLine" id="cb177-15" data-line-number="15"><span class="kw">text</span>( <span class="dv">64</span>, <span class="dv">200</span>, <span class="st">&quot;(Empty Plot Window)&quot;</span>, <span class="dt">cex=</span><span class="dv">2</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-257-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" data-line-number="1"><span class="co"># add points</span></a>
<a class="sourceLine" id="cb178-2" data-line-number="2"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb178-3" data-line-number="3"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(xmin,xmax), <span class="dt">ylim=</span><span class="kw">c</span>(ymin,ymax) )</a>
<a class="sourceLine" id="cb178-4" data-line-number="4"><span class="kw">box</span>( <span class="dt">col=</span><span class="st">&quot;gray&quot;</span> )</a>
<a class="sourceLine" id="cb178-5" data-line-number="5"><span class="kw">points</span>( Master<span class="op">$</span>height, Master<span class="op">$</span>weight, <span class="dt">pch=</span><span class="dv">19</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-258-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb179-1" data-line-number="1"><span class="co"># add an x-axis and y-axis</span></a>
<a class="sourceLine" id="cb179-2" data-line-number="2"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb179-3" data-line-number="3"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(xmin,xmax), <span class="dt">ylim=</span><span class="kw">c</span>(ymin,ymax) )</a>
<a class="sourceLine" id="cb179-4" data-line-number="4"><span class="kw">box</span>( <span class="dt">col=</span><span class="st">&quot;gray&quot;</span> )</a>
<a class="sourceLine" id="cb179-5" data-line-number="5"><span class="kw">points</span>( Master<span class="op">$</span>height, Master<span class="op">$</span>weight, <span class="dt">pch=</span><span class="dv">19</span> )</a>
<a class="sourceLine" id="cb179-6" data-line-number="6"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">1</span> )</a>
<a class="sourceLine" id="cb179-7" data-line-number="7"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">2</span>, <span class="dt">las=</span><span class="dv">1</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-259-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" data-line-number="1"><span class="co"># add axis labels</span></a>
<a class="sourceLine" id="cb180-2" data-line-number="2"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb180-3" data-line-number="3"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(xmin,xmax), <span class="dt">ylim=</span><span class="kw">c</span>(ymin,ymax) )</a>
<a class="sourceLine" id="cb180-4" data-line-number="4"><span class="kw">box</span>( <span class="dt">col=</span><span class="st">&quot;gray&quot;</span> )</a>
<a class="sourceLine" id="cb180-5" data-line-number="5"><span class="kw">points</span>( Master<span class="op">$</span>height, Master<span class="op">$</span>weight, <span class="dt">pch=</span><span class="dv">19</span> )</a>
<a class="sourceLine" id="cb180-6" data-line-number="6"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">1</span> )</a>
<a class="sourceLine" id="cb180-7" data-line-number="7"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">2</span>, <span class="dt">las=</span><span class="dv">1</span> )</a>
<a class="sourceLine" id="cb180-8" data-line-number="8"><span class="kw">title</span>( <span class="dt">xlab=</span><span class="st">&quot;Height (inches)&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Weight (lbs)&quot;</span> )</a>
<a class="sourceLine" id="cb180-9" data-line-number="9"><span class="kw">title</span>( <span class="dt">main=</span><span class="st">&quot;Relationship Between Height and Weight of MLB Players&quot;</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-260-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Now let’s see if we can improve the aestetics a bit. This is pretty dense data, so let’s see if we can use some color transparency to get a sense of typical players versus outliers.</p>
<p>Let’s adjust the xlim and ylim arguments so we don’t show the empty bottom left quadrant, and let’s use the <strong>gray()</strong> color function to add some transparency to the over-plotted data points. The first argument is a value between 0 and 1 specifying how dark you want the gray (0 being white, 1 being black, and any value in-between being a shade of gray). The second argument is another value between 0 and 1 specifying the transparency of the points, 0 being invisible and 1 being no transparency.</p>
<p>We can also jitter them a bit (a tiny amount of random error to each data point) so they are not all plotted on top of each other since height and weight only take integer values.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb181-1" data-line-number="1">height.jitter &lt;-<span class="st"> </span>Master<span class="op">$</span>height <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>( <span class="kw">nrow</span>(Master) )</a>
<a class="sourceLine" id="cb181-2" data-line-number="2">weight.jitter &lt;-<span class="st"> </span>Master<span class="op">$</span>weight <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>( <span class="kw">nrow</span>(Master) )</a>
<a class="sourceLine" id="cb181-3" data-line-number="3"></a>
<a class="sourceLine" id="cb181-4" data-line-number="4"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb181-5" data-line-number="5"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">60</span>,xmax), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">110</span>,ymax) )</a>
<a class="sourceLine" id="cb181-6" data-line-number="6"><span class="kw">points</span>( height.jitter, weight.jitter, </a>
<a class="sourceLine" id="cb181-7" data-line-number="7">        <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">cex=</span><span class="fl">1.2</span>, <span class="dt">col=</span><span class="kw">gray</span>(<span class="fl">0.5</span>,<span class="fl">0.02</span>) )</a>
<a class="sourceLine" id="cb181-8" data-line-number="8"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">1</span> )</a>
<a class="sourceLine" id="cb181-9" data-line-number="9"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">2</span> )</a>
<a class="sourceLine" id="cb181-10" data-line-number="10"><span class="kw">title</span>( <span class="dt">xlab=</span><span class="st">&quot;Height (inches)&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Weight (lbs)&quot;</span>,</a>
<a class="sourceLine" id="cb181-11" data-line-number="11">       <span class="dt">main=</span><span class="st">&quot;Relationship Between Height and Weight of MLB Players&quot;</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-261-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This is helpful, but maybe we want to highlight the data core some more. Let’s add another layer with only that data that falls within the 25th to 75th percentiles of height and weight.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" data-line-number="1"><span class="kw">quantile</span>( Master<span class="op">$</span>height ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pander</span>()</a></code></pre></div>
<table style="width:42%;">
<colgroup>
<col width="6%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">0%</th>
<th align="center">25%</th>
<th align="center">50%</th>
<th align="center">75%</th>
<th align="center">100%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">43</td>
<td align="center">71</td>
<td align="center">72</td>
<td align="center">74</td>
<td align="center">83</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb183-1" data-line-number="1"><span class="kw">quantile</span>( Master<span class="op">$</span>weight ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pander</span>()</a></code></pre></div>
<table style="width:42%;">
<colgroup>
<col width="6%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">0%</th>
<th align="center">25%</th>
<th align="center">50%</th>
<th align="center">75%</th>
<th align="center">100%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">65</td>
<td align="center">170</td>
<td align="center">185</td>
<td align="center">200</td>
<td align="center">320</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" data-line-number="1">height.jitter &lt;-<span class="st"> </span>Master<span class="op">$</span>height <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>( <span class="kw">nrow</span>(Master) )</a>
<a class="sourceLine" id="cb184-2" data-line-number="2">weight.jitter &lt;-<span class="st"> </span>Master<span class="op">$</span>weight <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>( <span class="kw">nrow</span>(Master) )</a>
<a class="sourceLine" id="cb184-3" data-line-number="3"></a>
<a class="sourceLine" id="cb184-4" data-line-number="4">height<span class="fl">.25</span>th &lt;-<span class="st"> </span><span class="kw">quantile</span>( Master<span class="op">$</span>height, <span class="fl">0.25</span>, <span class="dt">na.rm=</span>T )</a>
<a class="sourceLine" id="cb184-5" data-line-number="5">height<span class="fl">.75</span>th &lt;-<span class="st"> </span><span class="kw">quantile</span>( Master<span class="op">$</span>height, <span class="fl">0.75</span>, <span class="dt">na.rm=</span>T )</a>
<a class="sourceLine" id="cb184-6" data-line-number="6">these.height<span class="fl">.25</span>th.to<span class="fl">.75</span>th &lt;-<span class="st"> </span>Master<span class="op">$</span>height <span class="op">&gt;</span><span class="st"> </span>height<span class="fl">.25</span>th <span class="op">&amp;</span><span class="st"> </span>Master<span class="op">$</span>height <span class="op">&lt;</span><span class="st"> </span>height<span class="fl">.75</span>th</a>
<a class="sourceLine" id="cb184-7" data-line-number="7"></a>
<a class="sourceLine" id="cb184-8" data-line-number="8">weight<span class="fl">.25</span>th &lt;-<span class="st"> </span><span class="kw">quantile</span>( Master<span class="op">$</span>weight, <span class="fl">0.25</span>, <span class="dt">na.rm=</span>T )</a>
<a class="sourceLine" id="cb184-9" data-line-number="9">weight<span class="fl">.75</span>th &lt;-<span class="st"> </span><span class="kw">quantile</span>( Master<span class="op">$</span>weight, <span class="fl">0.75</span>, <span class="dt">na.rm=</span>T )</a>
<a class="sourceLine" id="cb184-10" data-line-number="10">these.weight<span class="fl">.25</span>th.to<span class="fl">.75</span>th &lt;-<span class="st"> </span>Master<span class="op">$</span>weight <span class="op">&gt;</span><span class="st"> </span>weight<span class="fl">.25</span>th <span class="op">&amp;</span><span class="st"> </span>Master<span class="op">$</span>weight <span class="op">&lt;</span><span class="st"> </span>weight<span class="fl">.75</span>th</a>
<a class="sourceLine" id="cb184-11" data-line-number="11"></a>
<a class="sourceLine" id="cb184-12" data-line-number="12">these.both<span class="fl">.25</span>th.to<span class="fl">.75</span>th &lt;-<span class="st"> </span>these.height<span class="fl">.25</span>th.to<span class="fl">.75</span>th <span class="op">&amp;</span><span class="st"> </span>these.weight<span class="fl">.25</span>th.to<span class="fl">.75</span>th</a>
<a class="sourceLine" id="cb184-13" data-line-number="13"></a>
<a class="sourceLine" id="cb184-14" data-line-number="14"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb184-15" data-line-number="15"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">60</span>,xmax), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">110</span>,ymax) )</a>
<a class="sourceLine" id="cb184-16" data-line-number="16"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">1</span> )</a>
<a class="sourceLine" id="cb184-17" data-line-number="17"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">2</span> )</a>
<a class="sourceLine" id="cb184-18" data-line-number="18"><span class="kw">title</span>( <span class="dt">xlab=</span><span class="st">&quot;Height (inches)&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Weight (lbs)&quot;</span>,</a>
<a class="sourceLine" id="cb184-19" data-line-number="19">       <span class="dt">main=</span><span class="st">&quot;Relationship Between Height and Weight of MLB Players&quot;</span> )</a>
<a class="sourceLine" id="cb184-20" data-line-number="20"></a>
<a class="sourceLine" id="cb184-21" data-line-number="21"><span class="kw">points</span>( height.jitter, weight.jitter, </a>
<a class="sourceLine" id="cb184-22" data-line-number="22">        <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">cex=</span><span class="fl">1.2</span>, <span class="dt">col=</span><span class="kw">gray</span>(<span class="fl">0.5</span>,<span class="fl">0.02</span>) )</a>
<a class="sourceLine" id="cb184-23" data-line-number="23"></a>
<a class="sourceLine" id="cb184-24" data-line-number="24"><span class="kw">points</span>( height.jitter[ these.both<span class="fl">.25</span>th.to<span class="fl">.75</span>th ], </a>
<a class="sourceLine" id="cb184-25" data-line-number="25">        weight.jitter[ these.both<span class="fl">.25</span>th.to<span class="fl">.75</span>th ], </a>
<a class="sourceLine" id="cb184-26" data-line-number="26">        <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">cex=</span><span class="fl">0.3</span>, <span class="dt">col=</span><span class="st">&quot;firebrick3&quot;</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-263-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>That didn’t quite work out because a player might be “average” height (height between 25th and 75th percentile), but be heavier or lighter than normal. The criteria we applied basically draws a box and finds data within the box.</p>
<p>Let’s rethink this a bit, and select players with “average” size using ratios between height and weight, often expressed as Body Mass Index (BMI). This selection criteria will not limit us to a square.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb185-1" data-line-number="1">bmi &lt;-<span class="st"> </span>(Master<span class="op">$</span>weight <span class="op">*</span><span class="st"> </span><span class="fl">0.45359237</span>) <span class="op">/</span><span class="st"> </span>(Master<span class="op">$</span>height <span class="op">/</span><span class="st"> </span><span class="fl">39.370</span>)<span class="op">^</span><span class="dv">2</span> </a>
<a class="sourceLine" id="cb185-2" data-line-number="2"></a>
<a class="sourceLine" id="cb185-3" data-line-number="3">bmi<span class="fl">.25</span>th &lt;-<span class="st"> </span><span class="kw">quantile</span>( bmi, <span class="fl">0.25</span>, <span class="dt">na.rm=</span>T )</a>
<a class="sourceLine" id="cb185-4" data-line-number="4">bmi<span class="fl">.75</span>th &lt;-<span class="st"> </span><span class="kw">quantile</span>( bmi, <span class="fl">0.75</span>, <span class="dt">na.rm=</span>T )</a>
<a class="sourceLine" id="cb185-5" data-line-number="5">these.bmi<span class="fl">.25</span>th.to<span class="fl">.75</span>th &lt;-<span class="st"> </span>bmi <span class="op">&gt;</span><span class="st"> </span>bmi<span class="fl">.25</span>th <span class="op">&amp;</span><span class="st"> </span>bmi <span class="op">&lt;</span><span class="st"> </span>bmi<span class="fl">.75</span>th</a>
<a class="sourceLine" id="cb185-6" data-line-number="6"></a>
<a class="sourceLine" id="cb185-7" data-line-number="7"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb185-8" data-line-number="8"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">60</span>,xmax), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">110</span>,ymax) )</a>
<a class="sourceLine" id="cb185-9" data-line-number="9"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">1</span> )</a>
<a class="sourceLine" id="cb185-10" data-line-number="10"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">2</span> )</a>
<a class="sourceLine" id="cb185-11" data-line-number="11"><span class="kw">title</span>( <span class="dt">xlab=</span><span class="st">&quot;Height (inches)&quot;</span>, <span class="dt">ylab=</span><span class="st">&quot;Weight (lbs)&quot;</span>,</a>
<a class="sourceLine" id="cb185-12" data-line-number="12">       <span class="dt">main=</span><span class="st">&quot;Relationship Between Height and Weight of MLB Players&quot;</span> )</a>
<a class="sourceLine" id="cb185-13" data-line-number="13"></a>
<a class="sourceLine" id="cb185-14" data-line-number="14"><span class="kw">points</span>( height.jitter, weight.jitter, </a>
<a class="sourceLine" id="cb185-15" data-line-number="15">        <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">cex=</span><span class="dv">2</span>, <span class="dt">col=</span><span class="kw">gray</span>(<span class="fl">0.5</span>,<span class="fl">0.02</span>) )</a>
<a class="sourceLine" id="cb185-16" data-line-number="16"></a>
<a class="sourceLine" id="cb185-17" data-line-number="17"><span class="kw">points</span>( height.jitter[ these.bmi<span class="fl">.25</span>th.to<span class="fl">.75</span>th ], </a>
<a class="sourceLine" id="cb185-18" data-line-number="18">        weight.jitter[ these.bmi<span class="fl">.25</span>th.to<span class="fl">.75</span>th ], </a>
<a class="sourceLine" id="cb185-19" data-line-number="19">        <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">cex=</span><span class="fl">0.1</span>, <span class="dt">col=</span><span class="st">&quot;firebrick3&quot;</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-264-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="highlighting-cases" class="section level2">
<h2><span class="header-section-number">10.4</span> Highlighting Cases</h2>
<p>Let’s look back at the original plot. Do you see anything strange?</p>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-265-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>The smallest data point in the dataset seems to represent a baseball player that is 40 inches tall and weighs 80 pounds. That <em>must</em> be some sort of data entry error, right?</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" data-line-number="1"><span class="kw">data</span>( Master) </a>
<a class="sourceLine" id="cb186-2" data-line-number="2">Master[ <span class="kw">which.min</span>(Master<span class="op">$</span>height) , <span class="kw">c</span>(<span class="dv">14</span>,<span class="dv">15</span>,<span class="dv">17</span><span class="op">:</span><span class="dv">20</span>,<span class="dv">2</span>) ] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pander</span>()</a></code></pre></div>
<table>
<colgroup>
<col width="13%" />
<col width="15%" />
<col width="13%" />
<col width="11%" />
<col width="11%" />
<col width="8%" />
<col width="11%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">nameFirst</th>
<th align="center">nameLast</th>
<th align="center">weight</th>
<th align="center">height</th>
<th align="center">bats</th>
<th align="center">throws</th>
<th align="center">birthYear</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>5839</strong></td>
<td align="center">Eddie</td>
<td align="center">Gaedel</td>
<td align="center">65</td>
<td align="center">43</td>
<td align="center">R</td>
<td align="center">L</td>
<td align="center">1925</td>
</tr>
</tbody>
</table>
<p><img src="figures/eddie_gaedel.png" width="70%" style="display: block; margin: auto;" /></p>
<p>It turns out that <a href="https://www.theversed.com/10266/the-tragic-story-of-eddie-gaedel-the-shortest-player-in-mlb-history/#.i0Qgkojft1">Eddie Gaedel</a>, at 3 foot 7 inches, was the shortest man to ever play on a professional team. He was hired by the owner of the St. Louis Browns as a publicity stunt. He was so short that his strike zone, which goes form the knee to mid-chest, was too small for most pitchers. Crowds would cheer as he would quickly accumulate the four balls he needed for a walk.</p>
<p>Perhaps it would be useful to annotate some of the outliers on our graph. To do this, we can use the text() function.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" data-line-number="1"><span class="kw">text</span>(</a>
<a class="sourceLine" id="cb187-2" data-line-number="2">  <span class="dt">x=</span>x, <span class="dt">y=</span>y,                    <span class="co"># draws a line by connecting points </span></a>
<a class="sourceLine" id="cb187-3" data-line-number="3">  <span class="dt">labels=</span>some.text,          <span class="co"># vector of labels to plot on the graph</span></a>
<a class="sourceLine" id="cb187-4" data-line-number="4">  <span class="dt">pos=</span><span class="dv">3</span>,                           <span class="co"># position: 1=below, 2=left, 3=above, 4=right</span></a>
<a class="sourceLine" id="cb187-5" data-line-number="5">  <span class="dt">cex=</span><span class="dv">2</span>,                           <span class="co"># aspect ratio of text size</span></a>
<a class="sourceLine" id="cb187-6" data-line-number="6">  <span class="dt">col=</span><span class="st">&quot;red&quot;</span>                    <span class="co"># color of text</span></a>
<a class="sourceLine" id="cb187-7" data-line-number="7"> )</a></code></pre></div>
<p>Let’s start by circling some data points. We do this by plotting a slightly larger point around the originals for the tallest, shortest, and heaviest players.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" data-line-number="1"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb188-2" data-line-number="2"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>) )</a>
<a class="sourceLine" id="cb188-3" data-line-number="3"><span class="kw">points</span>( <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">col=</span><span class="st">&quot;gray&quot;</span>, <span class="dt">cex=</span><span class="dv">3</span> )</a>
<a class="sourceLine" id="cb188-4" data-line-number="4"><span class="kw">points</span>( <span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="dt">pch=</span><span class="dv">1</span>, <span class="dt">cex=</span><span class="dv">5</span>, <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span> )</a>
<a class="sourceLine" id="cb188-5" data-line-number="5"><span class="kw">title</span>( <span class="dt">main=</span><span class="st">&quot;Large Hollow Point Plotted </span><span class="ch">\n</span><span class="st">Over Solid Point&quot;</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-269-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" data-line-number="1">this.shortest &lt;-<span class="st"> </span><span class="kw">which.min</span>(Master<span class="op">$</span>height)</a>
<a class="sourceLine" id="cb189-2" data-line-number="2">this.tallest  &lt;-<span class="st"> </span><span class="kw">which.max</span>(Master<span class="op">$</span>height)</a>
<a class="sourceLine" id="cb189-3" data-line-number="3">this.heaviest &lt;-<span class="st"> </span><span class="kw">which.max</span>(Master<span class="op">$</span>weight)</a>
<a class="sourceLine" id="cb189-4" data-line-number="4"></a>
<a class="sourceLine" id="cb189-5" data-line-number="5">Master[ <span class="kw">c</span>(this.shortest,this.tallest,this.heaviest), <span class="kw">c</span>(<span class="dv">14</span>,<span class="dv">15</span>,<span class="dv">17</span><span class="op">:</span><span class="dv">20</span>,<span class="dv">2</span>) ] <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pander</span>()</a></code></pre></div>
<table>
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="13%" />
<col width="11%" />
<col width="11%" />
<col width="8%" />
<col width="11%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">nameFirst</th>
<th align="center">nameLast</th>
<th align="center">weight</th>
<th align="center">height</th>
<th align="center">bats</th>
<th align="center">throws</th>
<th align="center">birthYear</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>5839</strong></td>
<td align="center">Eddie</td>
<td align="center">Gaedel</td>
<td align="center">65</td>
<td align="center">43</td>
<td align="center">R</td>
<td align="center">L</td>
<td align="center">1925</td>
</tr>
<tr class="even">
<td align="center"><strong>14139</strong></td>
<td align="center">Jon</td>
<td align="center">Rauch</td>
<td align="center">290</td>
<td align="center">83</td>
<td align="center">R</td>
<td align="center">R</td>
<td align="center">1978</td>
</tr>
<tr class="odd">
<td align="center"><strong>19008</strong></td>
<td align="center">Walter</td>
<td align="center">Young</td>
<td align="center">320</td>
<td align="center">77</td>
<td align="center">L</td>
<td align="center">R</td>
<td align="center">1980</td>
</tr>
</tbody>
</table>
<p>Let’s highlight</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" data-line-number="1"><span class="kw">plot</span>( Master<span class="op">$</span>height, Master<span class="op">$</span>weight, </a>
<a class="sourceLine" id="cb190-2" data-line-number="2">      <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">col=</span><span class="st">&quot;gray&quot;</span>,</a>
<a class="sourceLine" id="cb190-3" data-line-number="3">      <span class="dt">frame.plot=</span><span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb190-4" data-line-number="4">      <span class="dt">xlab=</span><span class="st">&quot;Height (inches)&quot;</span>, </a>
<a class="sourceLine" id="cb190-5" data-line-number="5">      <span class="dt">ylab=</span><span class="st">&quot;Weight (lbs)&quot;</span>, </a>
<a class="sourceLine" id="cb190-6" data-line-number="6">      <span class="dt">main=</span><span class="st">&quot;Relationship Between Height and Weight of MLB Players&quot;</span> )</a>
<a class="sourceLine" id="cb190-7" data-line-number="7"></a>
<a class="sourceLine" id="cb190-8" data-line-number="8"><span class="kw">points</span>( Master<span class="op">$</span>height[ this.shortest ], </a>
<a class="sourceLine" id="cb190-9" data-line-number="9">        Master<span class="op">$</span>weight[ this.shortest ], </a>
<a class="sourceLine" id="cb190-10" data-line-number="10">        <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>, <span class="dt">cex=</span><span class="dv">2</span>, <span class="dt">lwd=</span><span class="dv">2</span> )</a>
<a class="sourceLine" id="cb190-11" data-line-number="11"></a>
<a class="sourceLine" id="cb190-12" data-line-number="12"><span class="kw">points</span>( Master<span class="op">$</span>height[ this.tallest ], </a>
<a class="sourceLine" id="cb190-13" data-line-number="13">        Master<span class="op">$</span>weight[ this.tallest ], </a>
<a class="sourceLine" id="cb190-14" data-line-number="14">        <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>, <span class="dt">cex=</span><span class="dv">2</span>, <span class="dt">lwd=</span><span class="dv">2</span> )</a>
<a class="sourceLine" id="cb190-15" data-line-number="15"></a>
<a class="sourceLine" id="cb190-16" data-line-number="16"><span class="kw">points</span>( Master<span class="op">$</span>height[ this.heaviest ], </a>
<a class="sourceLine" id="cb190-17" data-line-number="17">        Master<span class="op">$</span>weight[ this.heaviest], </a>
<a class="sourceLine" id="cb190-18" data-line-number="18">        <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>, <span class="dt">cex=</span><span class="dv">2</span>, <span class="dt">lwd=</span><span class="dv">2</span> )</a>
<a class="sourceLine" id="cb190-19" data-line-number="19"></a>
<a class="sourceLine" id="cb190-20" data-line-number="20"><span class="kw">text</span>( Master<span class="op">$</span>height[ this.shortest ], </a>
<a class="sourceLine" id="cb190-21" data-line-number="21">      Master<span class="op">$</span>weight[ this.shortest ], </a>
<a class="sourceLine" id="cb190-22" data-line-number="22">      <span class="st">&quot;Some Text Here&quot;</span>, <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>, <span class="dt">pos=</span><span class="dv">3</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-272-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>We add text by giving the x,y coordinate for the text, the text itself, and we use the <strong>pos=</strong> argument to specify where the text should go.</p>
<ul>
<li>pos=1: below</li>
<li>pos=2: left</li>
<li>pos=3: top</li>
<li>pos=4: right</li>
<li>no pos: on the point</li>
</ul>
<p>You can see that we have a problem above. Our text above Eddie Gaedel is lopped off because it wanders outside of the plot window. We can add additional real estate by expanding plot window with the <strong>xlim=</strong> and <strong>ylim=</strong> arguments.</p>
<p>You can add a line break to a string by including the carriage return symbol “”.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" data-line-number="1"><span class="kw">data</span>( Master) </a>
<a class="sourceLine" id="cb191-2" data-line-number="2"></a>
<a class="sourceLine" id="cb191-3" data-line-number="3"><span class="kw">plot</span>( Master<span class="op">$</span>height, Master<span class="op">$</span>weight, </a>
<a class="sourceLine" id="cb191-4" data-line-number="4">      <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">col=</span><span class="st">&quot;gray&quot;</span>, <span class="dt">cex=</span><span class="fl">0.8</span>,</a>
<a class="sourceLine" id="cb191-5" data-line-number="5">      <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">30</span>,<span class="dv">100</span>), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">50</span>,<span class="dv">430</span>),</a>
<a class="sourceLine" id="cb191-6" data-line-number="6">      <span class="dt">frame.plot=</span><span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb191-7" data-line-number="7">      <span class="dt">xlab=</span><span class="st">&quot;Height (inches)&quot;</span>, </a>
<a class="sourceLine" id="cb191-8" data-line-number="8">      <span class="dt">ylab=</span><span class="st">&quot;Weight (lbs)&quot;</span>, </a>
<a class="sourceLine" id="cb191-9" data-line-number="9">      <span class="dt">main=</span><span class="st">&quot;Relationship Between Height and Weight of MLB Players&quot;</span> )</a>
<a class="sourceLine" id="cb191-10" data-line-number="10"></a>
<a class="sourceLine" id="cb191-11" data-line-number="11">d.small &lt;-<span class="st"> </span>Master[ <span class="kw">c</span>(this.shortest,this.tallest,this.heaviest), <span class="kw">c</span>(<span class="dv">14</span>,<span class="dv">15</span>,<span class="dv">17</span><span class="op">:</span><span class="dv">20</span>,<span class="dv">2</span>) ]</a>
<a class="sourceLine" id="cb191-12" data-line-number="12"></a>
<a class="sourceLine" id="cb191-13" data-line-number="13"><span class="kw">points</span>( d.small<span class="op">$</span>height, </a>
<a class="sourceLine" id="cb191-14" data-line-number="14">        d.small<span class="op">$</span>weight, </a>
<a class="sourceLine" id="cb191-15" data-line-number="15">        <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>, <span class="dt">cex=</span><span class="dv">2</span>, <span class="dt">lwd=</span><span class="dv">2</span> )</a>
<a class="sourceLine" id="cb191-16" data-line-number="16"></a>
<a class="sourceLine" id="cb191-17" data-line-number="17"><span class="kw">text</span>( Master<span class="op">$</span>height[ this.shortest ], </a>
<a class="sourceLine" id="cb191-18" data-line-number="18">      Master<span class="op">$</span>weight[ this.shortest ], </a>
<a class="sourceLine" id="cb191-19" data-line-number="19">      <span class="st">&quot;Eddie Gaedel </span><span class="ch">\n</span><span class="st">Height: 43 Inches </span><span class="ch">\n</span><span class="st">Weight: 65 Lbs&quot;</span>, </a>
<a class="sourceLine" id="cb191-20" data-line-number="20">      <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>, <span class="dt">cex=</span><span class="fl">0.8</span>, <span class="dt">pos=</span><span class="dv">3</span>, <span class="dt">offset=</span><span class="dv">1</span> )</a>
<a class="sourceLine" id="cb191-21" data-line-number="21"></a>
<a class="sourceLine" id="cb191-22" data-line-number="22"><span class="kw">text</span>( Master<span class="op">$</span>height[ this.tallest ], </a>
<a class="sourceLine" id="cb191-23" data-line-number="23">      Master<span class="op">$</span>weight[ this.tallest ], </a>
<a class="sourceLine" id="cb191-24" data-line-number="24">      <span class="st">&quot;Jon Rauch </span><span class="ch">\n</span><span class="st">Height: 83 Inches </span><span class="ch">\n</span><span class="st">Weight: 290 Lbs&quot;</span>, </a>
<a class="sourceLine" id="cb191-25" data-line-number="25">      <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>, <span class="dt">cex=</span><span class="fl">0.8</span>, <span class="dt">pos=</span><span class="dv">4</span>, <span class="dt">offset=</span><span class="dv">1</span> )</a>
<a class="sourceLine" id="cb191-26" data-line-number="26"></a>
<a class="sourceLine" id="cb191-27" data-line-number="27"><span class="kw">text</span>( Master<span class="op">$</span>height[ this.heaviest ], </a>
<a class="sourceLine" id="cb191-28" data-line-number="28">      Master<span class="op">$</span>weight[ this.heaviest ], </a>
<a class="sourceLine" id="cb191-29" data-line-number="29">      <span class="st">&quot;Walter Young </span><span class="ch">\n</span><span class="st">Height: 77 Inches </span><span class="ch">\n</span><span class="st">Weight: 320 Lbs&quot;</span>, </a>
<a class="sourceLine" id="cb191-30" data-line-number="30">      <span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>, <span class="dt">cex=</span><span class="fl">0.8</span>, <span class="dt">pos=</span><span class="dv">3</span>, <span class="dt">offset=</span><span class="dv">1</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-273-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
<div id="visual-hypothesis-testing" class="section level2">
<h2><span class="header-section-number">10.5</span> Visual Hypothesis Testing</h2>
<p>As you can see, the <strong>text()</strong> function can be used to add narrative to a graphic. It can also be used in place of plotting points.</p>
<p>Let’s think about testing the hypothesis that players have gotten larger over time. When we look at the basic relationship between height and weight we see the distribution of player sizes, but this plot has no information about the time-periods in which they played so we can’t tell if they are growing larger over time. What if we replace the plotting points with birth years?</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" data-line-number="1"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb192-2" data-line-number="2"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">60</span>,xmax), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">110</span>,ymax) )</a>
<a class="sourceLine" id="cb192-3" data-line-number="3"></a>
<a class="sourceLine" id="cb192-4" data-line-number="4"><span class="kw">text</span>( <span class="dt">x=</span>Master<span class="op">$</span>height, </a>
<a class="sourceLine" id="cb192-5" data-line-number="5">      <span class="dt">y=</span>Master<span class="op">$</span>weight, </a>
<a class="sourceLine" id="cb192-6" data-line-number="6">      <span class="dt">labels=</span>Master<span class="op">$</span>birthYear )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-274-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This is too dense to be meaningful. Maybe we can try to make the text smaller?</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb193-1" data-line-number="1"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb193-2" data-line-number="2"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">60</span>,xmax), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">110</span>,ymax) )</a>
<a class="sourceLine" id="cb193-3" data-line-number="3"><span class="kw">text</span>( <span class="dt">x=</span>Master<span class="op">$</span>height, </a>
<a class="sourceLine" id="cb193-4" data-line-number="4">      <span class="dt">y=</span>Master<span class="op">$</span>weight, </a>
<a class="sourceLine" id="cb193-5" data-line-number="5">      <span class="dt">labels=</span>Master<span class="op">$</span>birthYear, <span class="dt">cex=</span><span class="fl">0.5</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-275-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Still not very insightful. We have over 19,000 players in the database, which appears to be too many for this graphic. Let’s thin the data out by taking a random sample of the full dataset.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" data-line-number="1"><span class="kw">par</span>( <span class="dt">mar=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>) )</a>
<a class="sourceLine" id="cb194-2" data-line-number="2">m.sample &lt;-<span class="st"> </span><span class="kw">sample_n</span>( Master, <span class="dv">100</span> ) </a>
<a class="sourceLine" id="cb194-3" data-line-number="3"><span class="kw">plot.new</span>()</a>
<a class="sourceLine" id="cb194-4" data-line-number="4"><span class="kw">plot.window</span>( <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">65</span>,<span class="dv">78</span>), <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">130</span>,<span class="dv">280</span>) )</a>
<a class="sourceLine" id="cb194-5" data-line-number="5"><span class="kw">text</span>( <span class="dt">x=</span>m.sample<span class="op">$</span>height, </a>
<a class="sourceLine" id="cb194-6" data-line-number="6">      <span class="dt">y=</span>m.sample<span class="op">$</span>weight, </a>
<a class="sourceLine" id="cb194-7" data-line-number="7">      <span class="dt">labels=</span>m.sample<span class="op">$</span>birthYear, <span class="dt">cex=</span><span class="fl">0.8</span> )</a>
<a class="sourceLine" id="cb194-8" data-line-number="8"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">1</span>, <span class="dt">line=</span><span class="op">-</span><span class="dv">2</span> )</a>
<a class="sourceLine" id="cb194-9" data-line-number="9"><span class="kw">axis</span>( <span class="dt">side=</span><span class="dv">2</span>, <span class="dt">line=</span><span class="op">-</span><span class="dv">2</span> )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-276-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This is a big improvement. We can eyeball the data and start to pull out some trends. The people born in the 1800’s tend to be near the bottom of each pile of years, for example.</p>
<p>Perhaps we can improve our visual hypothesis testing if we add some color coding. Let’s identify all of the individuals born since 1980 and color their birth years red to highlight the youngest cohort in the data. If people have gotten larger over time, we would expect this group to cluster near the top of the distribution.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb195-1" data-line-number="1">red.gray &lt;-<span class="st"> </span><span class="kw">ifelse</span>( m.sample<span class="op">$</span>birthYear <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1980</span>, <span class="st">&quot;firebrick&quot;</span>, <span class="st">&quot;gray&quot;</span> )</a>
<a class="sourceLine" id="cb195-2" data-line-number="2"></a>
<a class="sourceLine" id="cb195-3" data-line-number="3"><span class="kw">text</span>( <span class="dt">x=</span>m.sample<span class="op">$</span>height, </a>
<a class="sourceLine" id="cb195-4" data-line-number="4">      <span class="dt">y=</span>m.sample<span class="op">$</span>weight, </a>
<a class="sourceLine" id="cb195-5" data-line-number="5">      <span class="dt">labels=</span>m.sample<span class="op">$</span>birthYear,</a>
<a class="sourceLine" id="cb195-6" data-line-number="6">      <span class="dt">col=</span>red.gray )</a></code></pre></div>
<p><img src="DS4PS-I_files/figure-html/unnamed-chunk-278-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>And we in fact see the pattern emerge. The youngest cohort, highlighted in red, seems to cluster near the top right, which suggests they have grown both taller and heavier over time.</p>
<p>This hypothesis can be test more rigorously in other ways, but the demonstration at least gives an idea about how we might explore the data efficiently using flexible R graphing functions.</p>
</div>
<div id="additional-parameters" class="section level2">
<h2><span class="header-section-number">10.6</span> Additional Parameters</h2>
<p>The small number of functions introduced here in these chapters on data visualization can be used to make highly-customizable graphics that help you discover important patterns in the data and share the story with others.</p>
<p>We are only scratching the surface on the options available within plotting functions. To see the default list of parameter settings in the R <strong>plot()</strong> function, type:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" data-line-number="1"><span class="kw">par</span>()</a>
<a class="sourceLine" id="cb196-2" data-line-number="2"><span class="kw">help</span>( par )</a></code></pre></div>
<p>These chapters show how core R graphics can be used to create highly-customized graphics. You can see that you have fine-tuned access to all aspects of the figures you create. You don’t have to become familiar with all of the options to develop solid visualization skills. Rather, you will likely focus on a few specific functions. A little time invested in learning the arguments for plot(), points(), lines(), text(), title(), and axis() goes a long way.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-plot-function.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="custom-plot-example.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/DS4PS/Data-Science-Class/tree/master/TEXTBOOK/CH-10-customized-graphics.Rmd",
"text": "Edit"
},
"download": ["DS4PS-I.pdf", "DS4PS-I.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
