<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Intro to Data Science for the Social Sector</title>
  <meta name="description" content="This is an introductory text to data science designed for social science graduate students in public affairs, nonprofit management, and international development.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Intro to Data Science for the Social Sector" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an introductory text to data science designed for social science graduate students in public affairs, nonprofit management, and international development." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Intro to Data Science for the Social Sector" />
  
  <meta name="twitter:description" content="This is an introductory text to data science designed for social science graduate students in public affairs, nonprofit management, and international development." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-structures.html">
<link rel="next" href="merging-data.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="custom.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://ds4ps.github.io/course_website/">Data Science I</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I PART I: FOUNDATIONS</b></span></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#navigation"><i class="fa fa-check"></i><b>1.1</b> Navigation</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#setting-your-working-directory"><i class="fa fa-check"></i><b>1.1.1</b> Setting Your Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#commenting-code"><i class="fa fa-check"></i><b>1.2</b> Commenting Code</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#help"><i class="fa fa-check"></i><b>1.3</b> Help</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#install-programs-packages"><i class="fa fa-check"></i><b>1.4</b> Install Programs (packages)</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#accessing-built-in-datasets-in-r"><i class="fa fa-check"></i><b>1.5</b> Accessing Built-In Datasets in R</a><ul>
<li class="chapter" data-level="1.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-data-operations"><i class="fa fa-check"></i><b>1.5.1</b> Basic Data Operations</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#using-the-lahman-data"><i class="fa fa-check"></i><b>1.5.2</b> Using the Lahman Data</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#example-analysis"><i class="fa fa-check"></i><b>1.5.3</b> Example Analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>2</b> Functions</a><ul>
<li class="chapter" data-level="2.1" data-path="functions.html"><a href="functions.html#key-concepts"><i class="fa fa-check"></i><b>2.1</b> Key Concepts</a></li>
<li class="chapter" data-level="2.2" data-path="functions.html"><a href="functions.html#computer-programs-as-recipes"><i class="fa fa-check"></i><b>2.2</b> Computer Programs as Recipes</a></li>
<li class="chapter" data-level="2.3" data-path="functions.html"><a href="functions.html#example-function"><i class="fa fa-check"></i><b>2.3</b> Example Function</a></li>
<li class="chapter" data-level="2.4" data-path="functions.html"><a href="functions.html#default-argument-values"><i class="fa fa-check"></i><b>2.4</b> Default Argument Values</a></li>
<li class="chapter" data-level="2.5" data-path="functions.html"><a href="functions.html#assignment"><i class="fa fa-check"></i><b>2.5</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>3</b> Data Structures</a><ul>
<li class="chapter" data-level="3.1" data-path="data-structures.html"><a href="data-structures.html#key-concepts-1"><i class="fa fa-check"></i><b>3.1</b> Key Concepts</a></li>
<li class="chapter" data-level="3.2" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>3.2</b> Vectors</a></li>
<li class="chapter" data-level="3.3" data-path="data-structures.html"><a href="data-structures.html#common-vectors-functions"><i class="fa fa-check"></i><b>3.3</b> Common Vectors Functions</a></li>
<li class="chapter" data-level="3.4" data-path="data-structures.html"><a href="data-structures.html#the-combine-function"><i class="fa fa-check"></i><b>3.4</b> The Combine Function</a></li>
<li class="chapter" data-level="3.5" data-path="data-structures.html"><a href="data-structures.html#casting"><i class="fa fa-check"></i><b>3.5</b> Casting</a></li>
<li class="chapter" data-level="3.6" data-path="data-structures.html"><a href="data-structures.html#numeric-vectors"><i class="fa fa-check"></i><b>3.6</b> Numeric Vectors</a><ul>
<li class="chapter" data-level="3.6.1" data-path="data-structures.html"><a href="data-structures.html#integers-are-simple-numeric-vectors"><i class="fa fa-check"></i><b>3.6.1</b> Integers Are Simple Numeric Vectors</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-structures.html"><a href="data-structures.html#character-vectors"><i class="fa fa-check"></i><b>3.7</b> Character Vectors</a><ul>
<li class="chapter" data-level="3.7.1" data-path="data-structures.html"><a href="data-structures.html#quotes-in-arguments"><i class="fa fa-check"></i><b>3.7.1</b> Quotes in Arguments</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-structures.html"><a href="data-structures.html#factors"><i class="fa fa-check"></i><b>3.8</b> Factors</a></li>
<li class="chapter" data-level="3.9" data-path="data-structures.html"><a href="data-structures.html#logical-vectors"><i class="fa fa-check"></i><b>3.9</b> Logical Vectors</a></li>
<li class="chapter" data-level="3.10" data-path="data-structures.html"><a href="data-structures.html#generating-vectors"><i class="fa fa-check"></i><b>3.10</b> Generating Vectors</a></li>
<li class="chapter" data-level="3.11" data-path="data-structures.html"><a href="data-structures.html#variable-transformations"><i class="fa fa-check"></i><b>3.11</b> Variable Transformations</a></li>
<li class="chapter" data-level="3.12" data-path="data-structures.html"><a href="data-structures.html#missing-values-nas"><i class="fa fa-check"></i><b>3.12</b> Missing Values: NA’s</a></li>
<li class="chapter" data-level="3.13" data-path="data-structures.html"><a href="data-structures.html#datasets"><i class="fa fa-check"></i><b>3.13</b> Datasets</a><ul>
<li class="chapter" data-level="3.13.1" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>3.13.1</b> Data Frames</a></li>
<li class="chapter" data-level="3.13.2" data-path="data-structures.html"><a href="data-structures.html#matrices"><i class="fa fa-check"></i><b>3.13.2</b> Matrices</a></li>
<li class="chapter" data-level="3.13.3" data-path="data-structures.html"><a href="data-structures.html#lists"><i class="fa fa-check"></i><b>3.13.3</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="3.14" data-path="data-structures.html"><a href="data-structures.html#the-attach-function"><i class="fa fa-check"></i><b>3.14</b> The ‘attach’ Function</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="logical-statements.html"><a href="logical-statements.html"><i class="fa fa-check"></i><b>4</b> Logical Statements</a><ul>
<li class="chapter" data-level="4.1" data-path="logical-statements.html"><a href="logical-statements.html#key-concepts-2"><i class="fa fa-check"></i><b>4.1</b> Key Concepts</a></li>
<li class="chapter" data-level="4.2" data-path="logical-statements.html"><a href="logical-statements.html#operators"><i class="fa fa-check"></i><b>4.2</b> Operators</a></li>
<li class="chapter" data-level="4.3" data-path="logical-statements.html"><a href="logical-statements.html#selector-vectors"><i class="fa fa-check"></i><b>4.3</b> Selector Vectors</a></li>
<li class="chapter" data-level="4.4" data-path="logical-statements.html"><a href="logical-statements.html#usefulness-of-selector-vectors"><i class="fa fa-check"></i><b>4.4</b> Usefulness of Selector Vectors</a></li>
<li class="chapter" data-level="4.5" data-path="logical-statements.html"><a href="logical-statements.html#compound-logical-statements"><i class="fa fa-check"></i><b>4.5</b> Compound Logical Statements</a></li>
<li class="chapter" data-level="4.6" data-path="logical-statements.html"><a href="logical-statements.html#nas-in-logical-statements"><i class="fa fa-check"></i><b>4.6</b> NAs in Logical Statements</a></li>
<li class="chapter" data-level="4.7" data-path="logical-statements.html"><a href="logical-statements.html#subsets"><i class="fa fa-check"></i><b>4.7</b> Subsets</a></li>
</ul></li>
<li class="part"><span><b>II PART II: DATA WRANGLING</b></span></li>
<li class="chapter" data-level="5" data-path="merging-data.html"><a href="merging-data.html"><i class="fa fa-check"></i><b>5</b> Merging Data</a><ul>
<li class="chapter" data-level="5.1" data-path="merging-data.html"><a href="merging-data.html#packages-used-in-this-chapter"><i class="fa fa-check"></i><b>5.1</b> Packages Used in This Chapter</a></li>
<li class="chapter" data-level="5.2" data-path="merging-data.html"><a href="merging-data.html#relational-databases"><i class="fa fa-check"></i><b>5.2</b> Relational Databases</a></li>
<li class="chapter" data-level="5.3" data-path="merging-data.html"><a href="merging-data.html#set-theory"><i class="fa fa-check"></i><b>5.3</b> Set Theory</a><ul>
<li class="chapter" data-level="5.3.1" data-path="merging-data.html"><a href="merging-data.html#set-theory-functions"><i class="fa fa-check"></i><b>5.3.1</b> Set Theory Functions</a></li>
<li class="chapter" data-level="5.3.2" data-path="merging-data.html"><a href="merging-data.html#set-theory-using-logical-operators"><i class="fa fa-check"></i><b>5.3.2</b> Set Theory Using Logical Operators</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="merging-data.html"><a href="merging-data.html#merging-data-1"><i class="fa fa-check"></i><b>5.4</b> Merging Data</a><ul>
<li class="chapter" data-level="5.4.1" data-path="merging-data.html"><a href="merging-data.html#the-by.x-and-by.y-arguments"><i class="fa fa-check"></i><b>5.4.1</b> The by.x and by.y Arguments</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="merging-data.html"><a href="merging-data.html#non-unique-observations-in-id-variables"><i class="fa fa-check"></i><b>5.5</b> Non-Unique Observations in ID Variables</a><ul>
<li class="chapter" data-level="5.5.1" data-path="merging-data.html"><a href="merging-data.html#example-of-incorrect-merge"><i class="fa fa-check"></i><b>5.5.1</b> Example of Incorrect Merge</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="merging-data.html"><a href="merging-data.html#the-in-function"><i class="fa fa-check"></i><b>5.6</b> The %in% function</a></li>
<li class="chapter" data-level="5.7" data-path="merging-data.html"><a href="merging-data.html#the-match-function"><i class="fa fa-check"></i><b>5.7</b> The Match Function</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html"><i class="fa fa-check"></i><b>6</b> Analysis with Groups in R</a><ul>
<li class="chapter" data-level="6.0.1" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#packages-used-in-this-chapter-1"><i class="fa fa-check"></i><b>6.0.1</b> Packages Used in this Chapter</a></li>
<li class="chapter" data-level="6.0.2" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#hypothetical-experimental-data"><i class="fa fa-check"></i><b>6.0.2</b> Hypothetical Experimental Data</a></li>
<li class="chapter" data-level="6.1" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#group-structure"><i class="fa fa-check"></i><b>6.1</b> Group Structure</a><ul>
<li class="chapter" data-level="6.1.1" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#what-are-groups"><i class="fa fa-check"></i><b>6.1.1</b> What Are Groups?</a></li>
<li class="chapter" data-level="6.1.2" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#main-take-away"><i class="fa fa-check"></i><b>6.1.2</b> Main Take-Away</a></li>
<li class="chapter" data-level="6.1.3" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#example"><i class="fa fa-check"></i><b>6.1.3</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#analysis-by-group"><i class="fa fa-check"></i><b>6.2</b> Analysis by Group</a><ul>
<li class="chapter" data-level="6.2.1" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#highest-ave-player-salary"><i class="fa fa-check"></i><b>6.2.1</b> Highest Ave Player Salary</a></li>
<li class="chapter" data-level="6.2.2" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#most-players-paid-over-5-million"><i class="fa fa-check"></i><b>6.2.2</b> Most Players Paid Over $5 Million</a></li>
<li class="chapter" data-level="6.2.3" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#fielding-positions"><i class="fa fa-check"></i><b>6.2.3</b> Fielding Positions</a></li>
<li class="chapter" data-level="6.2.4" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#country-of-birth"><i class="fa fa-check"></i><b>6.2.4</b> Country of Birth</a></li>
<li class="chapter" data-level="6.2.5" data-path="analysis-with-groups-in-r.html"><a href="analysis-with-groups-in-r.html#pay-raises"><i class="fa fa-check"></i><b>6.2.5</b> Pay Raises</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://webapp4.asu.edu/programs/t5/majorinfo/ASU00/PPPGEMS/graduate/false" target="blank">ASU</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intro to Data Science for the Social Sector</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="logical-statements" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Logical Statements</h1>
<style>
th {
    text-align: left;
}
td {
    text-align: left;
}
</style>
<div id="key-concepts-2" class="section level2">
<h2><span class="header-section-number">4.1</span> Key Concepts</h2>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-87"></span>
<img src="figures/group_selection.png" alt="Logical statements define group membership" width="70%" />
<p class="caption">
Figure 4.1: Logical statements define group membership
</p>
</div>
<p>Logical statements are used to translate regular language into computer code. Many of our data analysis problems start by defining our sub-groups of interest.</p>
<blockquote>
<p>What percentage of men over 30 are bald?</p>
</blockquote>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">these &lt;-<span class="st"> </span>gender <span class="op">==</span><span class="st"> &quot;male&quot;</span> <span class="op">&amp;</span><span class="st"> </span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span> <span class="op">&amp;</span><span class="st"> </span>hair <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="kw">mean</span>( these )</a></code></pre></div>
<blockquote>
<p>Do bearded men earn more than men without beards?</p>
</blockquote>
<p>We need to make sure statements are correct. For example, the complement of “men with beards” is not men without beards, it is men without beards OR women (with or without beards).</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-89"></span>
<img src="figures/bearded_men.png" alt="Compound statements can be tricky" width="60%" />
<p class="caption">
Figure 4.2: Compound statements can be tricky
</p>
</div>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">bearded.men &lt;-<span class="st"> </span>gender <span class="op">==</span><span class="st"> &quot;male&quot;</span> <span class="op">&amp;</span><span class="st"> </span>beard <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb72-2" data-line-number="2">proper.gentlemen &lt;-<span class="st"> </span>gender <span class="op">==</span><span class="st"> &quot;male&quot;</span> <span class="op">&amp;</span><span class="st"> </span>beard <span class="op">==</span><span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb72-3" data-line-number="3"><span class="kw">mean</span>( salary[ bearded.men ] )</a>
<a class="sourceLine" id="cb72-4" data-line-number="4"><span class="kw">mean</span>( salary[ <span class="op">!</span><span class="st"> </span>bearded.men ] )  <span class="co"># this is incorrect !!!</span></a>
<a class="sourceLine" id="cb72-5" data-line-number="5"><span class="kw">mean</span>( salary[ proper.gentlemen ] )</a></code></pre></div>
</div>
<div id="operators" class="section level2">
<h2><span class="header-section-number">4.2</span> Operators</h2>
<p>Logical operators are the most basic type of data programming and the core of many types of data analysis. Most of the time we are not conducting fancy statistics, we just want to identify members of a group (print all of the females from the study), or describe things that belong to a subset of the data (compare the average price of houses with garages to houses without garages).</p>
<p>In order to accomplish these simple tasks we need to use logic statements. A logic statement answers the question, does an observation belong to a group.</p>
<p>Many times groups are simple. Show me all of the professions that make over $100k a year, for example.</p>
<p>Sometimes groups are complex. Identify the African American children from a specific zip code in Chicago that live in households with single mothers.</p>
<p>You will use nine basic logical operators:</p>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>&lt;</strong></td>
<td>less than</td>
</tr>
<tr class="even">
<td><strong>&lt;=</strong></td>
<td>less than or equal to</td>
</tr>
<tr class="odd">
<td><strong>&gt;</strong></td>
<td>greater than</td>
</tr>
<tr class="even">
<td><strong>&gt;=</strong></td>
<td>greater than or equal to</td>
</tr>
<tr class="odd">
<td><strong>==</strong></td>
<td>exactly equal to</td>
</tr>
<tr class="even">
<td><strong>!=</strong></td>
<td>not equal to</td>
</tr>
<tr class="odd">
<td><strong>x | y</strong></td>
<td>x OR y</td>
</tr>
<tr class="even">
<td><strong>x &amp; y</strong></td>
<td>x AND y</td>
</tr>
<tr class="odd">
<td><strong>!</strong></td>
<td>opposite of</td>
</tr>
<tr class="even">
<td><strong>[ ]</strong></td>
<td>subset</td>
</tr>
</tbody>
</table>
<p>Logical operators create logical vectors, a vector that contains only TRUE or FALSE. The TRUE means that the observation belongs to the group, FALSE means it does not.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1">x1 &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">2</span> )</a>
<a class="sourceLine" id="cb73-2" data-line-number="2"></a>
<a class="sourceLine" id="cb73-3" data-line-number="3">x1 <span class="op">&gt;</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb73-4" data-line-number="4"><span class="co">### [1] FALSE  TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb73-5" data-line-number="5"></a>
<a class="sourceLine" id="cb73-6" data-line-number="6">x1 <span class="op">&gt;=</span><span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb73-7" data-line-number="7"><span class="co">### [1]  TRUE  TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb73-8" data-line-number="8"></a>
<a class="sourceLine" id="cb73-9" data-line-number="9">x1 <span class="op">==</span><span class="st"> </span><span class="dv">9</span> <span class="op">|</span><span class="st"> </span>x1 <span class="op">==</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb73-10" data-line-number="10"><span class="co">### [1] FALSE  TRUE  TRUE FALSE</span></a>
<a class="sourceLine" id="cb73-11" data-line-number="11"></a>
<a class="sourceLine" id="cb73-12" data-line-number="12">gender &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;male&quot;</span>,<span class="st">&quot;male&quot;</span>,<span class="st">&quot;female&quot;</span>,<span class="st">&quot;female&quot;</span>)</a>
<a class="sourceLine" id="cb73-13" data-line-number="13"></a>
<a class="sourceLine" id="cb73-14" data-line-number="14">gender <span class="op">==</span><span class="st"> &quot;female&quot;</span></a>
<a class="sourceLine" id="cb73-15" data-line-number="15"><span class="co">### [1] FALSE FALSE  TRUE  TRUE</span></a></code></pre></div>
<p>Note that the logical statement for “equals” is written with two equal signs. This is important to remember, because using a single equal sign can introduce subtle errors into your analysis.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">x1 &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">2</span> )</a>
<a class="sourceLine" id="cb74-2" data-line-number="2"></a>
<a class="sourceLine" id="cb74-3" data-line-number="3">x1 <span class="op">==</span><span class="st"> </span><span class="dv">9</span></a>
<a class="sourceLine" id="cb74-4" data-line-number="4"><span class="co">### [1] FALSE  TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb74-5" data-line-number="5"></a>
<a class="sourceLine" id="cb74-6" data-line-number="6">x1 =<span class="st"> </span><span class="dv">9</span>  <span class="co"># don&#39;t use a single equals operator!  it overwrites your variable</span></a>
<a class="sourceLine" id="cb74-7" data-line-number="7"></a>
<a class="sourceLine" id="cb74-8" data-line-number="8">x1</a>
<a class="sourceLine" id="cb74-9" data-line-number="9"><span class="co">### [1] 9</span></a></code></pre></div>
<p>We can write compound logical statements using the AND and OR operators:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">gender &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;male&quot;</span>,<span class="st">&quot;male&quot;</span>,<span class="st">&quot;female&quot;</span>,<span class="st">&quot;female&quot;</span>)</a>
<a class="sourceLine" id="cb75-2" data-line-number="2"></a>
<a class="sourceLine" id="cb75-3" data-line-number="3">study.group &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;treatment&quot;</span>,<span class="st">&quot;control&quot;</span>,<span class="st">&quot;treatment&quot;</span>,<span class="st">&quot;control&quot;</span>)</a>
<a class="sourceLine" id="cb75-4" data-line-number="4"></a>
<a class="sourceLine" id="cb75-5" data-line-number="5">gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>  <span class="op">&amp;</span><span class="st">  </span>study.group <span class="op">==</span><span class="st"> &quot;treatment&quot;</span></a>
<a class="sourceLine" id="cb75-6" data-line-number="6"><span class="co">### [1] FALSE FALSE  TRUE FALSE</span></a>
<a class="sourceLine" id="cb75-7" data-line-number="7"></a>
<a class="sourceLine" id="cb75-8" data-line-number="8">gender <span class="op">==</span><span class="st"> &quot;female&quot;</span>  <span class="op">|</span><span class="st">  </span>study.group <span class="op">==</span><span class="st"> &quot;treatment&quot;</span></a>
<a class="sourceLine" id="cb75-9" data-line-number="9"><span class="co">### [1]  TRUE FALSE  TRUE  TRUE</span></a></code></pre></div>
</div>
<div id="selector-vectors" class="section level2">
<h2><span class="header-section-number">4.3</span> Selector Vectors</h2>
<p>Note that we use operators to create logical vectors where TRUE designates observation that belong to the defined group, and FALSE designates observations outside the group. The term “selector vector” is a useful way to remember this purpose. When you are doing analysis, you select specific observaions to form a group, and you can</p>
<table style="width:54%;">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="13%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">name</th>
<th align="center">gender</th>
<th align="center">group</th>
<th align="center">strength</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">frank</td>
<td align="center">male</td>
<td align="center">treat</td>
<td align="center">27</td>
</tr>
<tr class="even">
<td align="center">wanda</td>
<td align="center">female</td>
<td align="center">treat</td>
<td align="center">43</td>
</tr>
<tr class="odd">
<td align="center">sanjay</td>
<td align="center">male</td>
<td align="center">control</td>
<td align="center">19</td>
</tr>
<tr class="even">
<td align="center">nancy</td>
<td align="center">female</td>
<td align="center">control</td>
<td align="center">58</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1">these.female &lt;-<span class="st"> </span>dat<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span></a>
<a class="sourceLine" id="cb76-2" data-line-number="2"></a>
<a class="sourceLine" id="cb76-3" data-line-number="3"><span class="kw">sum</span>( these.female )                   <span class="co"># number of women in the study</span></a>
<a class="sourceLine" id="cb76-4" data-line-number="4"><span class="co">### [1] 2</span></a>
<a class="sourceLine" id="cb76-5" data-line-number="5"><span class="kw">mean</span>( these.female )                  <span class="co"># proportion of the study that is women</span></a>
<a class="sourceLine" id="cb76-6" data-line-number="6"><span class="co">### [1] 0.5</span></a>
<a class="sourceLine" id="cb76-7" data-line-number="7">dat[ these.female , ]                 <span class="co"># all data belonging to women</span></a>
<a class="sourceLine" id="cb76-8" data-line-number="8"><span class="co">###    name gender   group strength</span></a>
<a class="sourceLine" id="cb76-9" data-line-number="9"><span class="co">### 2 wanda female   treat       43</span></a>
<a class="sourceLine" id="cb76-10" data-line-number="10"><span class="co">### 4 nancy female control       58</span></a>
<a class="sourceLine" id="cb76-11" data-line-number="11"><span class="kw">mean</span>( dat<span class="op">$</span>strength[ these.female ] )  <span class="co"># average outcome for women in the study</span></a>
<a class="sourceLine" id="cb76-12" data-line-number="12"><span class="co">### [1] 50.5</span></a></code></pre></div>
<p>I will consistently name my logical vectors “these.GROUP” throughout the chapters, where GROUP represents the group label. For example, I selected women above, so the selector vector is called “these.female”.</p>
</div>
<div id="usefulness-of-selector-vectors" class="section level2">
<h2><span class="header-section-number">4.4</span> Usefulness of Selector Vectors</h2>
<p>Selector vectors, i.e. logical vectors that were created by defining a group, have three main uses in our analysis.</p>
<p><strong>ONE</strong>: Logical vectors give us an easy way to count things within defined groups.</p>
<p>We can apply a <strong>sum()</strong> function to a logical vector, and the result will be a tally of all of the TRUE cases. The <strong>mean()</strong> function will give us the proportion of the sample that belongs to our defined group.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="co"># how many females do we have in our study?</span></a>
<a class="sourceLine" id="cb77-2" data-line-number="2"></a>
<a class="sourceLine" id="cb77-3" data-line-number="3"><span class="kw">sum</span>( gender <span class="op">==</span><span class="st"> &quot;female&quot;</span> )</a>
<a class="sourceLine" id="cb77-4" data-line-number="4"><span class="co">### [1] 2</span></a>
<a class="sourceLine" id="cb77-5" data-line-number="5"></a>
<a class="sourceLine" id="cb77-6" data-line-number="6"><span class="co"># how many females do we have in our treatment group?</span></a>
<a class="sourceLine" id="cb77-7" data-line-number="7"></a>
<a class="sourceLine" id="cb77-8" data-line-number="8"><span class="kw">sum</span>( gender <span class="op">==</span><span class="st"> &quot;female&quot;</span> <span class="op">&amp;</span><span class="st"> </span>study.group <span class="op">==</span><span class="st"> &quot;treatment&quot;</span> )</a>
<a class="sourceLine" id="cb77-9" data-line-number="9"><span class="co">### [1] 0</span></a>
<a class="sourceLine" id="cb77-10" data-line-number="10"></a>
<a class="sourceLine" id="cb77-11" data-line-number="11"><span class="co"># what proportion of our study are men? </span></a>
<a class="sourceLine" id="cb77-12" data-line-number="12"></a>
<a class="sourceLine" id="cb77-13" data-line-number="13"><span class="kw">mean</span>( gender <span class="op">==</span><span class="st"> &quot;male&quot;</span> )</a>
<a class="sourceLine" id="cb77-14" data-line-number="14"><span class="co">### [1] 0.5</span></a></code></pre></div>
<p><strong>TWO:</strong> We can create a selector variable that is used for subsets. A selector vector used in a subset operator will drop all observations that are FALSE, isolating data belonging to the group:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">these.female &lt;-<span class="st"> </span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span></a>
<a class="sourceLine" id="cb78-2" data-line-number="2">name[ these.female ]</a>
<a class="sourceLine" id="cb78-3" data-line-number="3"><span class="co">### [1] &quot;wanda&quot; &quot;nancy&quot;</span></a>
<a class="sourceLine" id="cb78-4" data-line-number="4">strength[ these.female ]</a>
<a class="sourceLine" id="cb78-5" data-line-number="5"><span class="co">### [1] 43 58</span></a></code></pre></div>
<p>Or we can create a subset of the full dataset:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1">dat[ these.female , ]</a></code></pre></div>
<table style="width:65%;">
<colgroup>
<col width="12%" />
<col width="11%" />
<col width="12%" />
<col width="13%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center"> </th>
<th align="center">name</th>
<th align="center">gender</th>
<th align="center">group</th>
<th align="center">strength</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><strong>2</strong></td>
<td align="center">wanda</td>
<td align="center">female</td>
<td align="center">treat</td>
<td align="center">43</td>
</tr>
<tr class="even">
<td align="center"><strong>4</strong></td>
<td align="center">nancy</td>
<td align="center">female</td>
<td align="center">control</td>
<td align="center">58</td>
</tr>
</tbody>
</table>
<p><strong>THREE</strong>: We use selector variables to replace observations with new values using the assignment operator. This is similar to a find and replace operation.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1">animals &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="st">&quot;mole&quot;</span>, <span class="st">&quot;mouse&quot;</span>, <span class="st">&quot;shrew&quot;</span>, <span class="st">&quot;mouse&quot;</span>, <span class="st">&quot;rat&quot;</span>, <span class="st">&quot;shrew&quot;</span> )</a>
<a class="sourceLine" id="cb80-2" data-line-number="2"></a>
<a class="sourceLine" id="cb80-3" data-line-number="3"><span class="co"># the lab assistant incorrectly identified the shrews</span></a>
<a class="sourceLine" id="cb80-4" data-line-number="4"></a>
<a class="sourceLine" id="cb80-5" data-line-number="5">animals</a>
<a class="sourceLine" id="cb80-6" data-line-number="6"><span class="co">### [1] &quot;mole&quot;  &quot;mouse&quot; &quot;shrew&quot; &quot;mouse&quot; &quot;rat&quot;   &quot;shrew&quot;</span></a>
<a class="sourceLine" id="cb80-7" data-line-number="7"></a>
<a class="sourceLine" id="cb80-8" data-line-number="8">animals[ animals <span class="op">==</span><span class="st"> &quot;shrew&quot;</span> ] &lt;-<span class="st"> &quot;possum&quot;</span></a>
<a class="sourceLine" id="cb80-9" data-line-number="9"></a>
<a class="sourceLine" id="cb80-10" data-line-number="10">animals</a>
<a class="sourceLine" id="cb80-11" data-line-number="11"><span class="co">### [1] &quot;mole&quot;   &quot;mouse&quot;  &quot;possum&quot; &quot;mouse&quot;  &quot;rat&quot;    &quot;possum&quot;</span></a></code></pre></div>
<p>We don’t know if linda received the treatment:</p>
<table style="width:31%;">
<colgroup>
<col width="11%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">name</th>
<th align="center">study.group</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">adam</td>
<td align="center">treatment</td>
</tr>
<tr class="even">
<td align="center">jamal</td>
<td align="center">control</td>
</tr>
<tr class="odd">
<td align="center">linda</td>
<td align="center">treatment</td>
</tr>
<tr class="even">
<td align="center">sriti</td>
<td align="center">control</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1">study.group[ name <span class="op">==</span><span class="st"> &quot;linda&quot;</span> ] &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb81-2" data-line-number="2"></a>
<a class="sourceLine" id="cb81-3" data-line-number="3">study.group</a>
<a class="sourceLine" id="cb81-4" data-line-number="4"><span class="co">### [1] &quot;treatment&quot; &quot;control&quot;   NA          &quot;control&quot;</span></a></code></pre></div>
<p>The <strong>!</strong> operator is a special case, where it is not used to define a new logical vector, but rather it swaps the values of an existing logical vector.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">x1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">1</span>,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb82-2" data-line-number="2"></a>
<a class="sourceLine" id="cb82-3" data-line-number="3">these &lt;-<span class="st"> </span>x1 <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb82-4" data-line-number="4"></a>
<a class="sourceLine" id="cb82-5" data-line-number="5">these</a>
<a class="sourceLine" id="cb82-6" data-line-number="6"><span class="co">### [1]  TRUE  TRUE FALSE FALSE</span></a>
<a class="sourceLine" id="cb82-7" data-line-number="7"></a>
<a class="sourceLine" id="cb82-8" data-line-number="8"><span class="op">!</span><span class="st"> </span>these</a>
<a class="sourceLine" id="cb82-9" data-line-number="9"><span class="co">### [1] FALSE FALSE  TRUE  TRUE</span></a>
<a class="sourceLine" id="cb82-10" data-line-number="10"></a>
<a class="sourceLine" id="cb82-11" data-line-number="11"><span class="op">!</span><span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb82-12" data-line-number="12"><span class="co">### [1] FALSE</span></a>
<a class="sourceLine" id="cb82-13" data-line-number="13"></a>
<a class="sourceLine" id="cb82-14" data-line-number="14"><span class="op">!</span><span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb82-15" data-line-number="15"><span class="co">### [1] TRUE</span></a></code></pre></div>
</div>
<div id="compound-logical-statements" class="section level2">
<h2><span class="header-section-number">4.5</span> Compound Logical Statements</h2>
<p>We can combine multiple logical statements using the AND, OR, and NOT operators ( &amp;, |, ! ). This functionality gives us an incredible ability to specify very granular groups within our analysis. This will be important as we begin to construct analysis in a way that we search for apples to apples comparisons within our data in order to make inferences about program effectiveness.</p>
<p>These statements require some precision, however. Use care when applying that AND, OR, and NOT operators as to not include unintended data in your sample. In the example above, the statement “NOT bearded men” does not mean men without beards. It means all people outside of the category of men without beards (the “complement”), which includes women with or without beards as well.</p>
<pre><code>! ( gender == &quot;male&quot; &amp; beard == TRUE )</code></pre>
<p>Also note that parentheses matter. Compare this statement to the statement above:</p>
<pre><code>! gender == &quot;male&quot; &amp; beard == TRUE</code></pre>
<p>Because we excluded the parentheses this statement now defines the group “NOT men AND with beards”, or bearded women.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-104"></span>
<img src="figures/compound_logical_statements.png" alt="Examples of group construction with compound statements" width="90%" />
<p class="caption">
Figure 4.3: Examples of group construction with compound statements
</p>
</div>
</div>
<div id="nas-in-logical-statements" class="section level2">
<h2><span class="header-section-number">4.6</span> NAs in Logical Statements</h2>
<p>Recall that missing values are an extremely important concept in statistics. If one-third of our survey sample reports that they never smoked pot, one-third reports they have smoked pot, and one-third did not answer the question, then what do we report for the proportion of the population that has smoked pot?</p>
<p>We might prefer to be cautious and count only the people that have confirmed they have smoked pot, resulting in an estimate of 33.3%.</p>
<p>If we throw out the missing data, then 50% of respondents have smoked pot.</p>
<p>If we assume those that refuse to answer have likely smoked pot, our estimate might be 66.6% of the sample.</p>
<p>These different results are a function of how we treat the missing data in our survey, so it is important that we can keep track of missing values, especially during subset operations.</p>
<p>Note how NAs effect compound logical statements:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" data-line-number="1"><span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb85-2" data-line-number="2"><span class="co">### [1] TRUE</span></a>
<a class="sourceLine" id="cb85-3" data-line-number="3"></a>
<a class="sourceLine" id="cb85-4" data-line-number="4"><span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb85-5" data-line-number="5"><span class="co">### [1] FALSE</span></a>
<a class="sourceLine" id="cb85-6" data-line-number="6"></a>
<a class="sourceLine" id="cb85-7" data-line-number="7"><span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb85-8" data-line-number="8"><span class="co">### [1] NA</span></a>
<a class="sourceLine" id="cb85-9" data-line-number="9"></a>
<a class="sourceLine" id="cb85-10" data-line-number="10"><span class="ot">FALSE</span> <span class="op">&amp;</span><span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb85-11" data-line-number="11"><span class="co">### [1] FALSE</span></a></code></pre></div>
<p>To make sense of these rules consider the following:</p>
<p>If one condition is already FALSE, the missing value does not matter because under the &amp; condition BOTH must be TRUE for the observation to belong to our defined group. After we know that one of the conditions is FALSE the missing value is irrelevant. For example, if we want to select all women in the treatment group, and we have a man with an unclear treatment group status, he is still excluded from the group because he is a man.</p>
<p>On the other hand, if one condition is TRUE, and another is NA, R does not want to throw out the data because the state of the missing value is unclear. As a result, it will preserve the observation, but it will replace all of the data with missing values to signal the lack of certainty associated with that observation.</p>
<table style="width:54%;">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="13%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">name</th>
<th align="center">gender</th>
<th align="center">group</th>
<th align="center">strength</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">frank</td>
<td align="center">male</td>
<td align="center">treat</td>
<td align="center">27</td>
</tr>
<tr class="even">
<td align="center">wanda</td>
<td align="center">female</td>
<td align="center">treat</td>
<td align="center">43</td>
</tr>
<tr class="odd">
<td align="center">sanjay</td>
<td align="center">male</td>
<td align="center">control</td>
<td align="center">19</td>
</tr>
<tr class="even">
<td align="center">nancy</td>
<td align="center">female</td>
<td align="center">control</td>
<td align="center">58</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1">keep.these &lt;-<span class="st"> </span><span class="kw">c</span>(T,F,<span class="ot">NA</span>,F)</a>
<a class="sourceLine" id="cb86-2" data-line-number="2">dat[ keep.these , ]</a>
<a class="sourceLine" id="cb86-3" data-line-number="3"><span class="co">###     name gender group strength</span></a>
<a class="sourceLine" id="cb86-4" data-line-number="4"><span class="co">### 1  frank   male treat       27</span></a>
<a class="sourceLine" id="cb86-5" data-line-number="5"><span class="co">### NA  &lt;NA&gt;   &lt;NA&gt;  &lt;NA&gt;       NA</span></a></code></pre></div>
<p>To remove these rows with missing values in your selector vector, replace all NAs with FALSE:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1">keep.these[ <span class="kw">is.na</span>(keep.these) ] &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb87-2" data-line-number="2">dat[ keep.these , ]</a>
<a class="sourceLine" id="cb87-3" data-line-number="3"><span class="co">###    name gender group strength</span></a>
<a class="sourceLine" id="cb87-4" data-line-number="4"><span class="co">### 1 frank   male treat       27</span></a></code></pre></div>
</div>
<div id="subsets" class="section level2">
<h2><span class="header-section-number">4.7</span> Subsets</h2>
<p>The subset operators <strong>[ ]</strong> are one of the most common you will use in R.</p>
<p>The primary rule of subsets is to use a data operator to create a logical selector vector, and use that to generate subsets. Any observation that corresponds to TRUE will be retained, any observation that corresponds to FALSE will be dropped.</p>
<p>For vectors, you need to specify a single dimension.</p>
<table style="width:54%;">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="13%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">name</th>
<th align="center">gender</th>
<th align="center">group</th>
<th align="center">strength</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">frank</td>
<td align="center">male</td>
<td align="center">treat</td>
<td align="center">27</td>
</tr>
<tr class="even">
<td align="center">wanda</td>
<td align="center">female</td>
<td align="center">treat</td>
<td align="center">43</td>
</tr>
<tr class="odd">
<td align="center">sanjay</td>
<td align="center">male</td>
<td align="center">control</td>
<td align="center">19</td>
</tr>
<tr class="even">
<td align="center">nancy</td>
<td align="center">female</td>
<td align="center">control</td>
<td align="center">58</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1">these.treat &lt;-<span class="st"> </span>dat<span class="op">$</span>group <span class="op">==</span><span class="st"> &quot;treat&quot;</span></a>
<a class="sourceLine" id="cb88-2" data-line-number="2">name[ these.treat ]</a>
<a class="sourceLine" id="cb88-3" data-line-number="3"><span class="co">### [1] &quot;frank&quot; &quot;wanda&quot;</span></a>
<a class="sourceLine" id="cb88-4" data-line-number="4">strength[ these.treat ]</a>
<a class="sourceLine" id="cb88-5" data-line-number="5"><span class="co">### [1] 27 43</span></a></code></pre></div>
<p>For data frames, you need two dimensions (rows and columns). The two dimensions are seperated by a comma, and if you leave one blank you will not drop anything.</p>
<blockquote>
<p>dat[ row position , column position ]</p>
</blockquote>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" data-line-number="1">these.control &lt;-<span class="st"> </span>dat<span class="op">$</span>group <span class="op">==</span><span class="st"> &quot;control&quot;</span></a>
<a class="sourceLine" id="cb89-2" data-line-number="2"></a>
<a class="sourceLine" id="cb89-3" data-line-number="3">dat[ these.control , ]   <span class="co"># all data in the control group</span></a>
<a class="sourceLine" id="cb89-4" data-line-number="4"><span class="co">###     name gender   group strength</span></a>
<a class="sourceLine" id="cb89-5" data-line-number="5"><span class="co">### 3 sanjay   male control       19</span></a>
<a class="sourceLine" id="cb89-6" data-line-number="6"><span class="co">### 4  nancy female control       58</span></a>
<a class="sourceLine" id="cb89-7" data-line-number="7"></a>
<a class="sourceLine" id="cb89-8" data-line-number="8">dat[ , <span class="kw">c</span>(<span class="st">&quot;name&quot;</span>,<span class="st">&quot;gender&quot;</span>) ]  <span class="co"># select two columns of data</span></a>
<a class="sourceLine" id="cb89-9" data-line-number="9"><span class="co">###     name gender</span></a>
<a class="sourceLine" id="cb89-10" data-line-number="10"><span class="co">### 1  frank   male</span></a>
<a class="sourceLine" id="cb89-11" data-line-number="11"><span class="co">### 2  wanda female</span></a>
<a class="sourceLine" id="cb89-12" data-line-number="12"><span class="co">### 3 sanjay   male</span></a>
<a class="sourceLine" id="cb89-13" data-line-number="13"><span class="co">### 4  nancy female</span></a>
<a class="sourceLine" id="cb89-14" data-line-number="14"></a>
<a class="sourceLine" id="cb89-15" data-line-number="15"><span class="co"># to keep a subset as a separate dataset</span></a>
<a class="sourceLine" id="cb89-16" data-line-number="16"></a>
<a class="sourceLine" id="cb89-17" data-line-number="17">dat.women &lt;-<span class="st"> </span>dat[ dat<span class="op">$</span>gender <span class="op">==</span><span class="st"> &quot;female&quot;</span> , ]</a>
<a class="sourceLine" id="cb89-18" data-line-number="18"></a>
<a class="sourceLine" id="cb89-19" data-line-number="19">dat.women</a>
<a class="sourceLine" id="cb89-20" data-line-number="20"><span class="co">###    name gender   group strength</span></a>
<a class="sourceLine" id="cb89-21" data-line-number="21"><span class="co">### 2 wanda female   treat       43</span></a>
<a class="sourceLine" id="cb89-22" data-line-number="22"><span class="co">### 4 nancy female control       58</span></a></code></pre></div>
<p>Note the rules listed above about subsetting factors. After applying a subset, they will retain all of the original levels, even when they are not longer useful. You need to drop the unused levels if you would like them to be omitted from functions that use the factor levels for analysis.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"></a>
<a class="sourceLine" id="cb90-2" data-line-number="2">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>( <span class="dt">letters=</span>LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">numbers=</span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) )</a>
<a class="sourceLine" id="cb90-3" data-line-number="3"></a>
<a class="sourceLine" id="cb90-4" data-line-number="4"><span class="kw">levels</span>( df<span class="op">$</span>letters )</a>
<a class="sourceLine" id="cb90-5" data-line-number="5"><span class="co">### [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot;</span></a>
<a class="sourceLine" id="cb90-6" data-line-number="6"></a>
<a class="sourceLine" id="cb90-7" data-line-number="7">sub.df &lt;-<span class="st"> </span>df[ <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, ]</a>
<a class="sourceLine" id="cb90-8" data-line-number="8"></a>
<a class="sourceLine" id="cb90-9" data-line-number="9">sub.df<span class="op">$</span>letters</a>
<a class="sourceLine" id="cb90-10" data-line-number="10"><span class="co">### [1] A B C</span></a>
<a class="sourceLine" id="cb90-11" data-line-number="11"><span class="co">### Levels: A B C D E</span></a>
<a class="sourceLine" id="cb90-12" data-line-number="12"></a>
<a class="sourceLine" id="cb90-13" data-line-number="13"><span class="kw">levels</span>( sub.df<span class="op">$</span>letters )</a>
<a class="sourceLine" id="cb90-14" data-line-number="14"><span class="co">### [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot;</span></a>
<a class="sourceLine" id="cb90-15" data-line-number="15"></a>
<a class="sourceLine" id="cb90-16" data-line-number="16"><span class="kw">droplevels</span>( sub.df<span class="op">$</span>letters )</a>
<a class="sourceLine" id="cb90-17" data-line-number="17"><span class="co">### [1] A B C</span></a>
<a class="sourceLine" id="cb90-18" data-line-number="18"><span class="co">### Levels: A B C</span></a>
<a class="sourceLine" id="cb90-19" data-line-number="19"></a>
<a class="sourceLine" id="cb90-20" data-line-number="20">sub.df<span class="op">$</span>letters &lt;-<span class="st"> </span><span class="kw">droplevels</span>( sub.df<span class="op">$</span>letters )</a></code></pre></div>

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="data-structures.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="merging-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/DS4PS/Data-Science-Class/tree/master/TEXTBOOK/CH-04-business-logic.Rmd",
"text": "Edit"
},
"download": ["DS4PS-I.pdf", "DS4PS-I.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
